{"ast":null,"code":"'use client';\n\nimport _defineProperty from \"/Users/anshugarg/Desktop/aa/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _slicedToArray from \"/Users/anshugarg/Desktop/aa/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _objectSpread from \"/Users/anshugarg/Desktop/aa/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _objectWithoutProperties from \"/Users/anshugarg/Desktop/aa/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nimport _toConsumableArray from \"/Users/anshugarg/Desktop/aa/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nvar _excluded = [\"buttons\"],\n  _excluded2 = [\"children\"],\n  _excluded3 = [\"label\", \"className\", \"icon\", \"renderIcon\", \"onClick\", \"style\"],\n  _excluded4 = [\"style\", \"className\"],\n  _excluded5 = [\"children\"],\n  _excluded6 = [\"easing\"],\n  _excluded7 = [\"easing\"],\n  _excluded8 = [\"carousel\", \"animation\", \"render\", \"toolbar\", \"controller\", \"on\", \"plugins\", \"slides\", \"index\"],\n  _excluded9 = [\"animation\", \"carousel\", \"render\", \"toolbar\", \"controller\", \"on\", \"slides\", \"index\", \"plugins\"];\nimport * as React from 'react';\nimport { ACTION_CLOSE, IMAGE_FIT_CONTAIN, MODULE_CONTROLLER, IMAGE_FIT_COVER, UNKNOWN_ACTION_TYPE, ELEMENT_BUTTON, ELEMENT_ICON, EVENT_ON_POINTER_DOWN, EVENT_ON_POINTER_MOVE, EVENT_ON_POINTER_UP, EVENT_ON_POINTER_LEAVE, EVENT_ON_POINTER_CANCEL, EVENT_ON_KEY_DOWN, EVENT_ON_KEY_UP, EVENT_ON_WHEEL, SLIDE_STATUS_LOADING, activeSlideStatus, SLIDE_STATUS_COMPLETE, SLIDE_STATUS_ERROR, SLIDE_STATUS_PLACEHOLDER, ACTION_PREV, ACTION_NEXT, ACTION_SWIPE, VK_ESCAPE, CLASS_FLEX_CENTER, MODULE_CAROUSEL, CLASS_FULLSIZE, VK_ARROW_LEFT, VK_ARROW_RIGHT, MODULE_NAVIGATION, CLASS_NO_SCROLL, CLASS_NO_SCROLL_PADDING, MODULE_NO_SCROLL, MODULE_PORTAL, MODULE_ROOT, MODULE_TOOLBAR } from './types.js';\nimport { createPortal } from 'react-dom';\nexport { ACTIVE_SLIDE_COMPLETE, ACTIVE_SLIDE_ERROR, ACTIVE_SLIDE_LOADING, ACTIVE_SLIDE_PLAYING, PLUGIN_CAPTIONS, PLUGIN_COUNTER, PLUGIN_DOWNLOAD, PLUGIN_FULLSCREEN, PLUGIN_INLINE, PLUGIN_SHARE, PLUGIN_SLIDESHOW, PLUGIN_THUMBNAILS, PLUGIN_ZOOM, SLIDE_STATUS_PLAYING } from './types.js';\nvar LightboxDefaultProps = {\n  open: false,\n  close: function close() {},\n  index: 0,\n  slides: [],\n  render: {},\n  plugins: [],\n  toolbar: {\n    buttons: [ACTION_CLOSE]\n  },\n  labels: {},\n  animation: {\n    fade: 250,\n    swipe: 500,\n    easing: {\n      fade: \"ease\",\n      swipe: \"ease-out\",\n      navigation: \"ease-in-out\"\n    }\n  },\n  carousel: {\n    finite: false,\n    preload: 2,\n    padding: \"16px\",\n    spacing: \"30%\",\n    imageFit: IMAGE_FIT_CONTAIN,\n    imageProps: {}\n  },\n  controller: {\n    ref: null,\n    focus: true,\n    aria: false,\n    touchAction: \"none\",\n    closeOnPullDown: false,\n    closeOnBackdropClick: false\n  },\n  portal: {},\n  on: {},\n  styles: {},\n  className: \"\"\n};\nfunction createModule(name, component) {\n  return {\n    name: name,\n    component: component\n  };\n}\nfunction createNode(module, children) {\n  return {\n    module: module,\n    children: children\n  };\n}\nfunction traverseNode(node, target, apply) {\n  if (node.module.name === target) {\n    return apply(node);\n  }\n  if (node.children) {\n    return [createNode(node.module, node.children.flatMap(function (n) {\n      var _a;\n      return (_a = traverseNode(n, target, apply)) !== null && _a !== void 0 ? _a : [];\n    }))];\n  }\n  return [node];\n}\nfunction traverse(nodes, target, apply) {\n  return nodes.flatMap(function (node) {\n    var _a;\n    return (_a = traverseNode(node, target, apply)) !== null && _a !== void 0 ? _a : [];\n  });\n}\nfunction withPlugins(root) {\n  var plugins = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var augmentations = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  var config = root;\n  var contains = function contains(target) {\n    var nodes = _toConsumableArray(config);\n    while (nodes.length > 0) {\n      var node = nodes.pop();\n      if ((node === null || node === void 0 ? void 0 : node.module.name) === target) return true;\n      if (node === null || node === void 0 ? void 0 : node.children) nodes.push.apply(nodes, _toConsumableArray(node.children));\n    }\n    return false;\n  };\n  var addParent = function addParent(target, module) {\n    if (target === \"\") {\n      config = [createNode(module, config)];\n      return;\n    }\n    config = traverse(config, target, function (node) {\n      return [createNode(module, [node])];\n    });\n  };\n  var append = function append(target, module) {\n    config = traverse(config, target, function (node) {\n      return [createNode(node.module, [createNode(module, node.children)])];\n    });\n  };\n  var addChild = function addChild(target, module, precede) {\n    config = traverse(config, target, function (node) {\n      var _a;\n      return [createNode(node.module, [].concat(_toConsumableArray(precede ? [createNode(module)] : []), _toConsumableArray((_a = node.children) !== null && _a !== void 0 ? _a : []), _toConsumableArray(!precede ? [createNode(module)] : [])))];\n    });\n  };\n  var addSibling = function addSibling(target, module, precede) {\n    config = traverse(config, target, function (node) {\n      return [].concat(_toConsumableArray(precede ? [createNode(module)] : []), [node], _toConsumableArray(!precede ? [createNode(module)] : []));\n    });\n  };\n  var addModule = function addModule(module) {\n    append(MODULE_CONTROLLER, module);\n  };\n  var replace = function replace(target, module) {\n    config = traverse(config, target, function (node) {\n      return [createNode(module, node.children)];\n    });\n  };\n  var remove = function remove(target) {\n    config = traverse(config, target, function (node) {\n      return node.children;\n    });\n  };\n  var augment = function augment(augmentation) {\n    augmentations.push(augmentation);\n  };\n  plugins.forEach(function (plugin) {\n    plugin({\n      contains: contains,\n      addParent: addParent,\n      append: append,\n      addChild: addChild,\n      addSibling: addSibling,\n      addModule: addModule,\n      replace: replace,\n      remove: remove,\n      augment: augment\n    });\n  });\n  return {\n    config: config,\n    augmentation: function augmentation(props) {\n      return augmentations.reduce(function (acc, augmentation) {\n        return augmentation(acc);\n      }, props);\n    }\n  };\n}\nvar clsx = function clsx() {\n  for (var _len = arguments.length, classes = new Array(_len), _key = 0; _key < _len; _key++) {\n    classes[_key] = arguments[_key];\n  }\n  return [].concat(classes).filter(function (cls) {\n    return Boolean(cls);\n  }).join(\" \");\n};\nvar cssPrefix$3 = \"yarl__\";\nvar cssClass = function cssClass(name) {\n  return \"\".concat(cssPrefix$3).concat(name);\n};\nvar cssVar = function cssVar(name) {\n  return \"--\".concat(cssPrefix$3).concat(name);\n};\nvar composePrefix = function composePrefix(base, prefix) {\n  return \"\".concat(base).concat(prefix ? \"_\".concat(prefix) : \"\");\n};\nvar makeComposePrefix = function makeComposePrefix(base) {\n  return function (prefix) {\n    return composePrefix(base, prefix);\n  };\n};\nvar label = function label(labels, lbl) {\n  return labels && labels[lbl] ? labels[lbl] : lbl;\n};\nvar cleanup = function cleanup() {\n  for (var _len2 = arguments.length, cleaners = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    cleaners[_key2] = arguments[_key2];\n  }\n  return function () {\n    cleaners.forEach(function (cleaner) {\n      cleaner();\n    });\n  };\n};\nvar makeUseContext = function makeUseContext(name, contextName, context) {\n  return function () {\n    var ctx = React.useContext(context);\n    if (!ctx) {\n      throw new Error(\"\".concat(name, \" must be used within a \").concat(contextName, \".Provider\"));\n    }\n    return ctx;\n  };\n};\nvar hasWindow = function hasWindow() {\n  return typeof window !== \"undefined\";\n};\nfunction round(value) {\n  var decimals = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var factor = Math.pow(10, decimals);\n  return Math.round((value + Number.EPSILON) * factor) / factor;\n}\nvar isImageSlide = function isImageSlide(slide) {\n  return slide.type === undefined || slide.type === \"image\";\n};\nvar isImageFitCover = function isImageFitCover(image, imageFit) {\n  return image.imageFit === IMAGE_FIT_COVER || image.imageFit !== IMAGE_FIT_CONTAIN && imageFit === IMAGE_FIT_COVER;\n};\nfunction parseLengthPercentage(input) {\n  if (typeof input === \"number\") {\n    return {\n      pixel: input\n    };\n  }\n  if (typeof input === \"string\") {\n    var value = parseInt(input, 10);\n    return input.endsWith(\"%\") ? {\n      percent: value\n    } : {\n      pixel: value\n    };\n  }\n  return {\n    pixel: 0\n  };\n}\nfunction computeSlideRect(containerRect, padding) {\n  var paddingValue = parseLengthPercentage(padding);\n  var paddingPixels = paddingValue.percent !== undefined ? containerRect.width / 100 * paddingValue.percent : paddingValue.pixel;\n  return {\n    width: Math.max(containerRect.width - 2 * paddingPixels, 0),\n    height: Math.max(containerRect.height - 2 * paddingPixels, 0)\n  };\n}\nvar devicePixelRatio = function devicePixelRatio() {\n  return (hasWindow() ? window === null || window === void 0 ? void 0 : window.devicePixelRatio : undefined) || 1;\n};\nvar getSlideIndex = function getSlideIndex(index, slidesCount) {\n  return slidesCount > 0 ? (index % slidesCount + slidesCount) % slidesCount : 0;\n};\nvar hasSlides = function hasSlides(slides) {\n  return slides.length > 0;\n};\nvar getSlide = function getSlide(slides, index) {\n  return slides[getSlideIndex(index, slides.length)];\n};\nvar getSlideIfPresent = function getSlideIfPresent(slides, index) {\n  return hasSlides(slides) ? getSlide(slides, index) : undefined;\n};\nfunction addToolbarButton(toolbar, key, button) {\n  if (!button) return toolbar;\n  var buttons = toolbar.buttons,\n    restToolbar = _objectWithoutProperties(toolbar, _excluded);\n  var index = buttons.findIndex(function (item) {\n    return item === key;\n  });\n  var buttonWithKey = React.isValidElement(button) ? React.cloneElement(button, {\n    key: key\n  }, null) : button;\n  if (index >= 0) {\n    var result = _toConsumableArray(buttons);\n    result.splice(index, 1, buttonWithKey);\n    return _objectSpread({\n      buttons: result\n    }, restToolbar);\n  }\n  return _objectSpread({\n    buttons: [buttonWithKey].concat(_toConsumableArray(buttons))\n  }, restToolbar);\n}\nfunction stopNavigationEventsPropagation() {\n  var stopPropagation = function stopPropagation(event) {\n    event.stopPropagation();\n  };\n  return {\n    onPointerDown: stopPropagation,\n    onKeyDown: stopPropagation,\n    onWheel: stopPropagation\n  };\n}\nvar EventsContext = React.createContext(null);\nvar useEvents = makeUseContext(\"useEvents\", \"EventsContext\", EventsContext);\nfunction EventsProvider(_ref) {\n  var children = _ref.children;\n  var _React$useState = React.useState({}),\n    _React$useState2 = _slicedToArray(_React$useState, 1),\n    subscriptions = _React$useState2[0];\n  React.useEffect(function () {\n    return function () {\n      Object.keys(subscriptions).forEach(function (topic) {\n        return delete subscriptions[topic];\n      });\n    };\n  }, [subscriptions]);\n  var context = React.useMemo(function () {\n    var unsubscribe = function unsubscribe(topic, callback) {\n      var _a2;\n      var _a;\n      (_a = subscriptions[topic]) === null || _a === void 0 ? void 0 : (_a2 = _a).splice.apply(_a2, [0, subscriptions[topic].length].concat(_toConsumableArray(subscriptions[topic].filter(function (cb) {\n        return cb !== callback;\n      }))));\n    };\n    var subscribe = function subscribe(topic, callback) {\n      if (!subscriptions[topic]) {\n        subscriptions[topic] = [];\n      }\n      subscriptions[topic].push(callback);\n      return function () {\n        return unsubscribe(topic, callback);\n      };\n    };\n    var publish = function publish() {\n      for (var _len3 = arguments.length, _ref2 = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        _ref2[_key3] = arguments[_key3];\n      }\n      var topic = _ref2[0],\n        event = _ref2[1];\n      var _a;\n      (_a = subscriptions[topic]) === null || _a === void 0 ? void 0 : _a.forEach(function (callback) {\n        return callback(event);\n      });\n    };\n    return {\n      publish: publish,\n      subscribe: subscribe,\n      unsubscribe: unsubscribe\n    };\n  }, [subscriptions]);\n  return React.createElement(EventsContext.Provider, {\n    value: context\n  }, children);\n}\nvar LightboxPropsContext = React.createContext(null);\nvar useLightboxProps = makeUseContext(\"useLightboxProps\", \"LightboxPropsContext\", LightboxPropsContext);\nfunction LightboxPropsProvider(_ref3) {\n  var children = _ref3.children,\n    props = _objectWithoutProperties(_ref3, _excluded2);\n  return React.createElement(LightboxPropsContext.Provider, {\n    value: props\n  }, children);\n}\nvar LightboxStateContext = React.createContext(null);\nvar useLightboxState = makeUseContext(\"useLightboxState\", \"LightboxStateContext\", LightboxStateContext);\nvar LightboxDispatchContext = React.createContext(null);\nvar useLightboxDispatch = makeUseContext(\"useLightboxDispatch\", \"LightboxDispatchContext\", LightboxDispatchContext);\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"swipe\":\n      {\n        var slides = state.slides;\n        var increment = (action === null || action === void 0 ? void 0 : action.increment) || 0;\n        var globalIndex = state.globalIndex + increment;\n        var currentIndex = getSlideIndex(globalIndex, slides.length);\n        var currentSlide = getSlideIfPresent(slides, currentIndex);\n        var animation = increment || action.duration ? {\n          increment: increment,\n          duration: action.duration,\n          easing: action.easing\n        } : undefined;\n        return {\n          slides: slides,\n          currentIndex: currentIndex,\n          globalIndex: globalIndex,\n          currentSlide: currentSlide,\n          animation: animation\n        };\n      }\n    case \"update\":\n      return {\n        slides: action.slides,\n        currentIndex: action.index,\n        globalIndex: action.index,\n        currentSlide: getSlideIfPresent(action.slides, action.index)\n      };\n    default:\n      throw new Error(UNKNOWN_ACTION_TYPE);\n  }\n}\nfunction LightboxStateProvider(_ref4) {\n  var slides = _ref4.slides,\n    index = _ref4.index,\n    children = _ref4.children;\n  var _React$useReducer = React.useReducer(reducer, {\n      slides: slides,\n      currentIndex: index,\n      globalIndex: index,\n      currentSlide: getSlideIfPresent(slides, index)\n    }),\n    _React$useReducer2 = _slicedToArray(_React$useReducer, 2),\n    state = _React$useReducer2[0],\n    dispatch = _React$useReducer2[1];\n  React.useEffect(function () {\n    dispatch({\n      type: \"update\",\n      slides: slides,\n      index: index\n    });\n  }, [slides, index]);\n  var context = React.useMemo(function () {\n    return _objectSpread(_objectSpread({}, state), {}, {\n      state: state,\n      dispatch: dispatch\n    });\n  }, [state, dispatch]);\n  return React.createElement(LightboxDispatchContext.Provider, {\n    value: dispatch\n  }, React.createElement(LightboxStateContext.Provider, {\n    value: context\n  }, children));\n}\nvar TimeoutsContext = React.createContext(null);\nvar useTimeouts = makeUseContext(\"useTimeouts\", \"TimeoutsContext\", TimeoutsContext);\nfunction TimeoutsProvider(_ref5) {\n  var children = _ref5.children;\n  var _React$useState3 = React.useState([]),\n    _React$useState4 = _slicedToArray(_React$useState3, 1),\n    timeouts = _React$useState4[0];\n  React.useEffect(function () {\n    return function () {\n      timeouts.forEach(function (tid) {\n        return window.clearTimeout(tid);\n      });\n      timeouts.splice(0, timeouts.length);\n    };\n  }, [timeouts]);\n  var context = React.useMemo(function () {\n    var removeTimeout = function removeTimeout(id) {\n      timeouts.splice.apply(timeouts, [0, timeouts.length].concat(_toConsumableArray(timeouts.filter(function (tid) {\n        return tid !== id;\n      }))));\n    };\n    var setTimeout = function setTimeout(fn, delay) {\n      var id = window.setTimeout(function () {\n        removeTimeout(id);\n        fn();\n      }, delay);\n      timeouts.push(id);\n      return id;\n    };\n    var clearTimeout = function clearTimeout(id) {\n      if (id !== undefined) {\n        removeTimeout(id);\n        window.clearTimeout(id);\n      }\n    };\n    return {\n      setTimeout: setTimeout,\n      clearTimeout: clearTimeout\n    };\n  }, [timeouts]);\n  return React.createElement(TimeoutsContext.Provider, {\n    value: context\n  }, children);\n}\nvar IconButton = React.forwardRef(function IconButton(_ref6, ref) {\n  var label$1 = _ref6.label,\n    className = _ref6.className,\n    Icon = _ref6.icon,\n    renderIcon = _ref6.renderIcon,\n    onClick = _ref6.onClick,\n    style = _ref6.style,\n    rest = _objectWithoutProperties(_ref6, _excluded3);\n  var _useLightboxProps = useLightboxProps(),\n    styles = _useLightboxProps.styles,\n    labels = _useLightboxProps.labels;\n  return React.createElement(\"button\", _objectSpread({\n    ref: ref,\n    type: \"button\",\n    \"aria-label\": label(labels, label$1),\n    className: clsx(cssClass(ELEMENT_BUTTON), className),\n    onClick: onClick,\n    style: _objectSpread(_objectSpread({}, style), styles.button)\n  }, rest), renderIcon ? renderIcon() : React.createElement(Icon, {\n    className: cssClass(ELEMENT_ICON),\n    style: styles.icon\n  }));\n});\nfunction svgIcon(name, children) {\n  var icon = function icon(props) {\n    return React.createElement(\"svg\", _objectSpread({\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 24 24\",\n      width: \"24\",\n      height: \"24\",\n      \"aria-hidden\": \"true\",\n      focusable: \"false\"\n    }, props), children);\n  };\n  icon.displayName = name;\n  return icon;\n}\nfunction createIcon(name, glyph) {\n  return svgIcon(name, React.createElement(\"g\", {\n    fill: \"currentColor\"\n  }, React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"none\"\n  }), glyph));\n}\nfunction createIconDisabled(name, glyph) {\n  return svgIcon(name, React.createElement(React.Fragment, null, React.createElement(\"defs\", null, React.createElement(\"mask\", {\n    id: \"strike\"\n  }, React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"white\"\n  }), React.createElement(\"path\", {\n    d: \"M0 0L24 24\",\n    stroke: \"black\",\n    strokeWidth: 4\n  }))), React.createElement(\"path\", {\n    d: \"M0.70707 2.121320L21.878680 23.292883\",\n    stroke: \"currentColor\",\n    strokeWidth: 2\n  }), React.createElement(\"g\", {\n    fill: \"currentColor\",\n    mask: \"url(#strike)\"\n  }, React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"none\"\n  }), glyph)));\n}\nvar CloseIcon = createIcon(\"Close\", React.createElement(\"path\", {\n  d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n}));\nvar PreviousIcon = createIcon(\"Previous\", React.createElement(\"path\", {\n  d: \"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\"\n}));\nvar NextIcon = createIcon(\"Next\", React.createElement(\"path\", {\n  d: \"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"\n}));\nvar LoadingIcon = createIcon(\"Loading\", React.createElement(React.Fragment, null, Array.from({\n  length: 8\n}).map(function (_, index, array) {\n  return React.createElement(\"line\", {\n    key: index,\n    x1: \"12\",\n    y1: \"6.5\",\n    x2: \"12\",\n    y2: \"1.8\",\n    strokeLinecap: \"round\",\n    strokeWidth: \"2.6\",\n    stroke: \"currentColor\",\n    strokeOpacity: 1 / array.length * (index + 1),\n    transform: \"rotate(\".concat(360 / array.length * index, \", 12, 12)\")\n  });\n})));\nvar ErrorIcon = createIcon(\"Error\", React.createElement(\"path\", {\n  d: \"M21.9,21.9l-8.49-8.49l0,0L3.59,3.59l0,0L2.1,2.1L0.69,3.51L3,5.83V19c0,1.1,0.9,2,2,2h13.17l2.31,2.31L21.9,21.9z M5,18 l3.5-4.5l2.5,3.01L12.17,15l3,3H5z M21,18.17L5.83,3H19c1.1,0,2,0.9,2,2V18.17z\"\n}));\nvar useLayoutEffect = hasWindow() ? React.useLayoutEffect : React.useEffect;\nfunction useMotionPreference() {\n  var _React$useState5 = React.useState(false),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    reduceMotion = _React$useState6[0],\n    setReduceMotion = _React$useState6[1];\n  React.useEffect(function () {\n    var _a, _b;\n    var mediaQuery = (_a = window.matchMedia) === null || _a === void 0 ? void 0 : _a.call(window, \"(prefers-reduced-motion: reduce)\");\n    setReduceMotion(mediaQuery === null || mediaQuery === void 0 ? void 0 : mediaQuery.matches);\n    var listener = function listener(event) {\n      return setReduceMotion(event.matches);\n    };\n    (_b = mediaQuery === null || mediaQuery === void 0 ? void 0 : mediaQuery.addEventListener) === null || _b === void 0 ? void 0 : _b.call(mediaQuery, \"change\", listener);\n    return function () {\n      var _a;\n      return (_a = mediaQuery === null || mediaQuery === void 0 ? void 0 : mediaQuery.removeEventListener) === null || _a === void 0 ? void 0 : _a.call(mediaQuery, \"change\", listener);\n    };\n  }, []);\n  return reduceMotion;\n}\nfunction currentTransformation(node) {\n  var x = 0;\n  var y = 0;\n  var z = 0;\n  var matrix = window.getComputedStyle(node).transform;\n  var matcher = matrix.match(/matrix.*\\((.+)\\)/);\n  if (matcher) {\n    var values = matcher[1].split(\",\").map(function (str) {\n      return Number.parseInt(str, 10);\n    });\n    if (values.length === 6) {\n      x = values[4];\n      y = values[5];\n    } else if (values.length === 16) {\n      x = values[12];\n      y = values[13];\n      z = values[14];\n    }\n  }\n  return {\n    x: x,\n    y: y,\n    z: z\n  };\n}\nfunction useAnimation(nodeRef, computeAnimation) {\n  var snapshot = React.useRef();\n  var animation = React.useRef();\n  var reduceMotion = useMotionPreference();\n  useLayoutEffect(function () {\n    var _a, _b, _c;\n    if (nodeRef.current && snapshot.current !== undefined && !reduceMotion) {\n      var _ref7 = computeAnimation(snapshot.current, nodeRef.current.getBoundingClientRect(), currentTransformation(nodeRef.current)) || {},\n        keyframes = _ref7.keyframes,\n        duration = _ref7.duration,\n        easing = _ref7.easing,\n        onfinish = _ref7.onfinish;\n      if (keyframes && duration) {\n        (_a = animation.current) === null || _a === void 0 ? void 0 : _a.cancel();\n        animation.current = undefined;\n        try {\n          animation.current = (_c = (_b = nodeRef.current).animate) === null || _c === void 0 ? void 0 : _c.call(_b, keyframes, {\n            duration: duration,\n            easing: easing\n          });\n        } catch (err) {\n          console.error(err);\n        }\n        if (animation.current) {\n          animation.current.onfinish = function () {\n            animation.current = undefined;\n            onfinish === null || onfinish === void 0 ? void 0 : onfinish();\n          };\n        }\n      }\n    }\n    snapshot.current = undefined;\n  });\n  return {\n    prepareAnimation: function prepareAnimation(currentSnapshot) {\n      snapshot.current = currentSnapshot;\n    },\n    isAnimationPlaying: function isAnimationPlaying() {\n      var _a;\n      return ((_a = animation.current) === null || _a === void 0 ? void 0 : _a.playState) === \"running\";\n    }\n  };\n}\nfunction useContainerRect() {\n  var _React$useState7 = React.useState(),\n    _React$useState8 = _slicedToArray(_React$useState7, 2),\n    containerRect = _React$useState8[0],\n    setContainerRect = _React$useState8[1];\n  var containerRef = React.useRef(null);\n  var observerRef = React.useRef();\n  var setContainerRef = React.useCallback(function (node) {\n    containerRef.current = node;\n    if (observerRef.current) {\n      observerRef.current.disconnect();\n      observerRef.current = undefined;\n    }\n    var updateContainerRect = function updateContainerRect() {\n      if (node) {\n        var styles = window.getComputedStyle(node);\n        var parse = function parse(value) {\n          return parseFloat(value) || 0;\n        };\n        setContainerRect({\n          width: Math.round(node.clientWidth - parse(styles.paddingLeft) - parse(styles.paddingRight)),\n          height: Math.round(node.clientHeight - parse(styles.paddingTop) - parse(styles.paddingBottom))\n        });\n      } else {\n        setContainerRect(undefined);\n      }\n    };\n    updateContainerRect();\n    if (node && typeof ResizeObserver !== \"undefined\") {\n      observerRef.current = new ResizeObserver(updateContainerRect);\n      observerRef.current.observe(node);\n    }\n  }, []);\n  return React.useMemo(function () {\n    return {\n      setContainerRef: setContainerRef,\n      containerRef: containerRef,\n      containerRect: containerRect\n    };\n  }, [setContainerRef, containerRef, containerRect]);\n}\nfunction useDelay() {\n  var timeoutId = React.useRef();\n  var _useTimeouts = useTimeouts(),\n    setTimeout = _useTimeouts.setTimeout,\n    clearTimeout = _useTimeouts.clearTimeout;\n  return React.useCallback(function (callback, delay) {\n    clearTimeout(timeoutId.current);\n    timeoutId.current = setTimeout(callback, delay > 0 ? delay : 0);\n  }, [setTimeout, clearTimeout]);\n}\nfunction useEventCallback(fn) {\n  var ref = React.useRef(fn);\n  useLayoutEffect(function () {\n    ref.current = fn;\n  });\n  return React.useCallback(function () {\n    var _a3;\n    var _a;\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n    return (_a = ref.current) === null || _a === void 0 ? void 0 : (_a3 = _a).call.apply(_a3, [ref].concat(args));\n  }, []);\n}\nfunction setRef(ref, value) {\n  if (typeof ref === \"function\") {\n    ref(value);\n  } else if (ref) {\n    ref.current = value;\n  }\n}\nfunction useForkRef(refA, refB) {\n  return React.useMemo(function () {\n    return refA == null && refB == null ? null : function (refValue) {\n      setRef(refA, refValue);\n      setRef(refB, refValue);\n    };\n  }, [refA, refB]);\n}\nfunction useLoseFocus(focus) {\n  var disabled = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var focused = React.useRef();\n  useLayoutEffect(function () {\n    if (disabled && focused.current) {\n      focused.current = false;\n      focus();\n    }\n  }, [disabled, focus]);\n  var onFocus = React.useCallback(function () {\n    focused.current = true;\n  }, []);\n  var onBlur = React.useCallback(function () {\n    focused.current = false;\n  }, []);\n  return {\n    onFocus: onFocus,\n    onBlur: onBlur\n  };\n}\nfunction useRTL() {\n  var _React$useState9 = React.useState(false),\n    _React$useState10 = _slicedToArray(_React$useState9, 2),\n    isRTL = _React$useState10[0],\n    setIsRTL = _React$useState10[1];\n  useLayoutEffect(function () {\n    setIsRTL(window.getComputedStyle(window.document.documentElement).direction === \"rtl\");\n  }, []);\n  return isRTL;\n}\nfunction useSensors() {\n  var _React$useState11 = React.useState({}),\n    _React$useState12 = _slicedToArray(_React$useState11, 1),\n    subscribers = _React$useState12[0];\n  return React.useMemo(function () {\n    var notifySubscribers = function notifySubscribers(type, event) {\n      var _a;\n      (_a = subscribers[type]) === null || _a === void 0 ? void 0 : _a.forEach(function (listener) {\n        if (!event.isPropagationStopped()) listener(event);\n      });\n    };\n    return {\n      registerSensors: {\n        onPointerDown: function onPointerDown(event) {\n          return notifySubscribers(EVENT_ON_POINTER_DOWN, event);\n        },\n        onPointerMove: function onPointerMove(event) {\n          return notifySubscribers(EVENT_ON_POINTER_MOVE, event);\n        },\n        onPointerUp: function onPointerUp(event) {\n          return notifySubscribers(EVENT_ON_POINTER_UP, event);\n        },\n        onPointerLeave: function onPointerLeave(event) {\n          return notifySubscribers(EVENT_ON_POINTER_LEAVE, event);\n        },\n        onPointerCancel: function onPointerCancel(event) {\n          return notifySubscribers(EVENT_ON_POINTER_CANCEL, event);\n        },\n        onKeyDown: function onKeyDown(event) {\n          return notifySubscribers(EVENT_ON_KEY_DOWN, event);\n        },\n        onKeyUp: function onKeyUp(event) {\n          return notifySubscribers(EVENT_ON_KEY_UP, event);\n        },\n        onWheel: function onWheel(event) {\n          return notifySubscribers(EVENT_ON_WHEEL, event);\n        }\n      },\n      subscribeSensors: function subscribeSensors(type, callback) {\n        if (!subscribers[type]) {\n          subscribers[type] = [];\n        }\n        subscribers[type].unshift(callback);\n        return function () {\n          var listeners = subscribers[type];\n          if (listeners) {\n            listeners.splice.apply(listeners, [0, listeners.length].concat(_toConsumableArray(listeners.filter(function (el) {\n              return el !== callback;\n            }))));\n          }\n        };\n      }\n    };\n  }, [subscribers]);\n}\nfunction useThrottle(callback, delay) {\n  var lastCallbackTime = React.useRef(0);\n  var delayCallback = useDelay();\n  var executeCallback = useEventCallback(function () {\n    lastCallbackTime.current = Date.now();\n    for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      args[_key5] = arguments[_key5];\n    }\n    callback(args);\n  });\n  return React.useCallback(function () {\n    for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n      args[_key6] = arguments[_key6];\n    }\n    delayCallback(function () {\n      executeCallback(args);\n    }, delay - (Date.now() - lastCallbackTime.current));\n  }, [delay, executeCallback, delayCallback]);\n}\nvar slidePrefix = makeComposePrefix(\"slide\");\nvar slideImagePrefix = makeComposePrefix(\"slide_image\");\nfunction ImageSlide(_ref8) {\n  var image = _ref8.slide,\n    offset = _ref8.offset,\n    render = _ref8.render,\n    rect = _ref8.rect,\n    imageFit = _ref8.imageFit,\n    imageProps = _ref8.imageProps,\n    onClick = _ref8.onClick,\n    onLoad = _ref8.onLoad,\n    style = _ref8.style;\n  var _a, _b, _c, _d, _e, _f, _g;\n  var _React$useState13 = React.useState(SLIDE_STATUS_LOADING),\n    _React$useState14 = _slicedToArray(_React$useState13, 2),\n    status = _React$useState14[0],\n    setStatus = _React$useState14[1];\n  var _useEvents = useEvents(),\n    publish = _useEvents.publish;\n  var _useTimeouts2 = useTimeouts(),\n    setTimeout = _useTimeouts2.setTimeout;\n  var imageRef = React.useRef(null);\n  React.useEffect(function () {\n    if (offset === 0) {\n      publish(activeSlideStatus(status));\n    }\n  }, [offset, status, publish]);\n  var handleLoading = useEventCallback(function (img) {\n    (\"decode\" in img ? img.decode() : Promise.resolve()).catch(function () {}).then(function () {\n      if (!img.parentNode) {\n        return;\n      }\n      setStatus(SLIDE_STATUS_COMPLETE);\n      setTimeout(function () {\n        onLoad === null || onLoad === void 0 ? void 0 : onLoad(img);\n      }, 0);\n    });\n  });\n  var setImageRef = React.useCallback(function (img) {\n    imageRef.current = img;\n    if (img === null || img === void 0 ? void 0 : img.complete) {\n      handleLoading(img);\n    }\n  }, [handleLoading]);\n  var handleOnLoad = React.useCallback(function (event) {\n    handleLoading(event.currentTarget);\n  }, [handleLoading]);\n  var onError = React.useCallback(function () {\n    setStatus(SLIDE_STATUS_ERROR);\n  }, []);\n  var cover = isImageFitCover(image, imageFit);\n  var nonInfinite = function nonInfinite(value, fallback) {\n    return Number.isFinite(value) ? value : fallback;\n  };\n  var maxWidth = nonInfinite(Math.max.apply(Math, _toConsumableArray(((_b = (_a = image.srcSet) === null || _a === void 0 ? void 0 : _a.map(function (x) {\n    return x.width;\n  })) !== null && _b !== void 0 ? _b : []).concat(image.width ? [image.width] : []))), ((_c = imageRef.current) === null || _c === void 0 ? void 0 : _c.naturalWidth) || 0);\n  var maxHeight = nonInfinite(Math.max.apply(Math, _toConsumableArray(((_e = (_d = image.srcSet) === null || _d === void 0 ? void 0 : _d.map(function (x) {\n    return x.height;\n  })) !== null && _e !== void 0 ? _e : []).concat(image.height ? [image.height] : []))), ((_f = imageRef.current) === null || _f === void 0 ? void 0 : _f.naturalHeight) || 0);\n  var defaultStyle = maxWidth && maxHeight ? {\n    maxWidth: \"min(\".concat(maxWidth, \"px, 100%)\"),\n    maxHeight: \"min(\".concat(maxHeight, \"px, 100%)\")\n  } : {\n    maxWidth: \"100%\",\n    maxHeight: \"100%\"\n  };\n  var srcSet = (_g = image.srcSet) === null || _g === void 0 ? void 0 : _g.sort(function (a, b) {\n    return a.width - b.width;\n  }).map(function (item) {\n    return \"\".concat(item.src, \" \").concat(item.width, \"w\");\n  }).join(\", \");\n  var estimateActualWidth = function estimateActualWidth() {\n    return rect && !cover && image.width && image.height ? rect.height / image.height * image.width : Number.MAX_VALUE;\n  };\n  var sizes = srcSet && rect && hasWindow() ? \"\".concat(Math.round(Math.min(estimateActualWidth(), rect.width)), \"px\") : undefined;\n  var _ref9 = imageProps || {},\n    imagePropsStyle = _ref9.style,\n    imagePropsClassName = _ref9.className,\n    restImageProps = _objectWithoutProperties(_ref9, _excluded4);\n  return React.createElement(React.Fragment, null, React.createElement(\"img\", _objectSpread(_objectSpread({\n    ref: setImageRef,\n    onLoad: handleOnLoad,\n    onError: onError,\n    onClick: onClick,\n    draggable: false,\n    className: clsx(cssClass(slideImagePrefix()), cover && cssClass(slideImagePrefix(\"cover\")), status !== SLIDE_STATUS_COMPLETE && cssClass(slideImagePrefix(\"loading\")), imagePropsClassName),\n    style: _objectSpread(_objectSpread(_objectSpread({}, defaultStyle), style), imagePropsStyle)\n  }, restImageProps), {}, {\n    alt: image.alt,\n    sizes: sizes,\n    srcSet: srcSet,\n    src: image.src\n  })), status !== SLIDE_STATUS_COMPLETE && React.createElement(\"div\", {\n    className: cssClass(slidePrefix(SLIDE_STATUS_PLACEHOLDER))\n  }, status === SLIDE_STATUS_LOADING && ((render === null || render === void 0 ? void 0 : render.iconLoading) ? render.iconLoading() : React.createElement(LoadingIcon, {\n    className: clsx(cssClass(ELEMENT_ICON), cssClass(slidePrefix(SLIDE_STATUS_LOADING)))\n  })), status === SLIDE_STATUS_ERROR && ((render === null || render === void 0 ? void 0 : render.iconError) ? render.iconError() : React.createElement(ErrorIcon, {\n    className: clsx(cssClass(ELEMENT_ICON), cssClass(slidePrefix(SLIDE_STATUS_ERROR)))\n  }))));\n}\nvar SwipeState;\n(function (SwipeState) {\n  SwipeState[SwipeState[\"NONE\"] = 0] = \"NONE\";\n  SwipeState[SwipeState[\"SWIPE\"] = 1] = \"SWIPE\";\n  SwipeState[SwipeState[\"PULL_DOWN\"] = 2] = \"PULL_DOWN\";\n  SwipeState[SwipeState[\"ANIMATION\"] = 3] = \"ANIMATION\";\n})(SwipeState || (SwipeState = {}));\nfunction usePointerEvents(subscribeSensors, onPointerDown, onPointerMove, onPointerUp, disabled) {\n  React.useEffect(function () {\n    if (disabled) return function () {};\n    return cleanup(subscribeSensors(EVENT_ON_POINTER_DOWN, onPointerDown), subscribeSensors(EVENT_ON_POINTER_MOVE, onPointerMove), subscribeSensors(EVENT_ON_POINTER_UP, onPointerUp), subscribeSensors(EVENT_ON_POINTER_LEAVE, onPointerUp), subscribeSensors(EVENT_ON_POINTER_CANCEL, onPointerUp));\n  }, [subscribeSensors, onPointerDown, onPointerMove, onPointerUp, disabled]);\n}\nvar Gesture;\n(function (Gesture) {\n  Gesture[Gesture[\"NONE\"] = 0] = \"NONE\";\n  Gesture[Gesture[\"SWIPE\"] = 1] = \"SWIPE\";\n  Gesture[Gesture[\"PULL_DOWN\"] = 2] = \"PULL_DOWN\";\n})(Gesture || (Gesture = {}));\nvar SWIPE_THRESHOLD = 30;\nfunction usePointerSwipe(subscribeSensors, isSwipeValid, containerWidth, swipeAnimationDuration, onSwipeStart, onSwipeProgress, onSwipeFinish, onSwipeCancel, pullDownEnabled, onPullDownStart, onPullDownProgress, onPullDownFinish, onPullDownCancel) {\n  var offset = React.useRef(0);\n  var pointers = React.useRef([]);\n  var activePointer = React.useRef();\n  var startTime = React.useRef(0);\n  var gesture = React.useRef(Gesture.NONE);\n  var clearPointer = React.useCallback(function (event) {\n    if (activePointer.current === event.pointerId) {\n      activePointer.current = undefined;\n      gesture.current = Gesture.NONE;\n    }\n    var currentPointers = pointers.current;\n    currentPointers.splice.apply(currentPointers, [0, currentPointers.length].concat(_toConsumableArray(currentPointers.filter(function (p) {\n      return p.pointerId !== event.pointerId;\n    }))));\n  }, []);\n  var addPointer = React.useCallback(function (event) {\n    clearPointer(event);\n    event.persist();\n    pointers.current.push(event);\n  }, [clearPointer]);\n  var onPointerDown = useEventCallback(function (event) {\n    addPointer(event);\n  });\n  var onPointerUp = useEventCallback(function (event) {\n    if (pointers.current.find(function (x) {\n      return x.pointerId === event.pointerId;\n    }) && activePointer.current === event.pointerId) {\n      var duration = Date.now() - startTime.current;\n      var currentOffset = offset.current;\n      if (gesture.current === Gesture.SWIPE) {\n        if (Math.abs(currentOffset) > 0.3 * containerWidth || Math.abs(currentOffset) > 5 && duration < swipeAnimationDuration) {\n          onSwipeFinish(currentOffset, duration);\n        } else {\n          onSwipeCancel(currentOffset);\n        }\n      } else if (gesture.current === Gesture.PULL_DOWN) {\n        if (currentOffset > 2 * SWIPE_THRESHOLD) {\n          onPullDownFinish(currentOffset, duration);\n        } else {\n          onPullDownCancel(currentOffset);\n        }\n      }\n      offset.current = 0;\n      gesture.current = Gesture.NONE;\n    }\n    clearPointer(event);\n  });\n  var onPointerMove = useEventCallback(function (event) {\n    var pointer = pointers.current.find(function (p) {\n      return p.pointerId === event.pointerId;\n    });\n    if (pointer) {\n      var isCurrentPointer = activePointer.current === event.pointerId;\n      if (event.buttons === 0) {\n        if (isCurrentPointer && offset.current !== 0) {\n          onPointerUp(event);\n        } else {\n          clearPointer(pointer);\n        }\n        return;\n      }\n      var deltaX = event.clientX - pointer.clientX;\n      var deltaY = event.clientY - pointer.clientY;\n      if (activePointer.current === undefined) {\n        var startGesture = function startGesture(newGesture) {\n          addPointer(event);\n          activePointer.current = event.pointerId;\n          startTime.current = Date.now();\n          gesture.current = newGesture;\n        };\n        if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > SWIPE_THRESHOLD && isSwipeValid(deltaX)) {\n          startGesture(Gesture.SWIPE);\n          onSwipeStart();\n        } else if (pullDownEnabled && Math.abs(deltaY) > Math.abs(deltaX) && deltaY > SWIPE_THRESHOLD) {\n          startGesture(Gesture.PULL_DOWN);\n          onPullDownStart();\n        }\n      } else if (isCurrentPointer) {\n        if (gesture.current === Gesture.SWIPE) {\n          offset.current = deltaX;\n          onSwipeProgress(deltaX);\n        } else if (gesture.current === Gesture.PULL_DOWN) {\n          offset.current = deltaY;\n          onPullDownProgress(deltaY);\n        }\n      }\n    }\n  });\n  usePointerEvents(subscribeSensors, onPointerDown, onPointerMove, onPointerUp);\n}\nvar WHEEL = \"wheel\";\nfunction preventDefault(event) {\n  if (Math.abs(event.deltaX) > Math.abs(event.deltaY) || event.ctrlKey) {\n    event.preventDefault();\n  }\n}\nfunction usePreventSwipeNavigation() {\n  var ref = React.useRef(null);\n  return React.useCallback(function (node) {\n    var _a;\n    if (node) {\n      node.addEventListener(WHEEL, preventDefault, {\n        passive: false\n      });\n    } else {\n      (_a = ref.current) === null || _a === void 0 ? void 0 : _a.removeEventListener(WHEEL, preventDefault);\n    }\n    ref.current = node;\n  }, []);\n}\nfunction useWheelSwipe(swipeState, subscribeSensors, isSwipeValid, containerWidth, swipeAnimationDuration, onSwipeStart, onSwipeProgress, onSwipeFinish, onSwipeCancel) {\n  var offset = React.useRef(0);\n  var intent = React.useRef(0);\n  var intentCleanup = React.useRef();\n  var resetCleanup = React.useRef();\n  var wheelResidualMomentum = React.useRef(0);\n  var startTime = React.useRef(0);\n  var _useTimeouts3 = useTimeouts(),\n    setTimeout = _useTimeouts3.setTimeout,\n    clearTimeout = _useTimeouts3.clearTimeout;\n  var cancelSwipeIntentCleanup = React.useCallback(function () {\n    if (intentCleanup.current) {\n      clearTimeout(intentCleanup.current);\n      intentCleanup.current = undefined;\n    }\n  }, [clearTimeout]);\n  var cancelSwipeResetCleanup = React.useCallback(function () {\n    if (resetCleanup.current) {\n      clearTimeout(resetCleanup.current);\n      resetCleanup.current = undefined;\n    }\n  }, [clearTimeout]);\n  var handleCleanup = useEventCallback(function () {\n    if (swipeState !== SwipeState.SWIPE) {\n      offset.current = 0;\n      startTime.current = 0;\n      cancelSwipeIntentCleanup();\n      cancelSwipeResetCleanup();\n    }\n  });\n  React.useEffect(handleCleanup, [swipeState, handleCleanup]);\n  var handleCancelSwipe = useEventCallback(function (currentSwipeOffset) {\n    resetCleanup.current = undefined;\n    if (offset.current === currentSwipeOffset) {\n      onSwipeCancel(offset.current);\n    }\n  });\n  var onWheel = useEventCallback(function (event) {\n    if (event.ctrlKey) {\n      return;\n    }\n    if (Math.abs(event.deltaY) > Math.abs(event.deltaX)) {\n      return;\n    }\n    if (swipeState === SwipeState.NONE) {\n      if (Math.abs(event.deltaX) <= 1.2 * Math.abs(wheelResidualMomentum.current)) {\n        wheelResidualMomentum.current = event.deltaX;\n        return;\n      }\n      if (!isSwipeValid(-event.deltaX)) {\n        return;\n      }\n      intent.current += event.deltaX;\n      cancelSwipeIntentCleanup();\n      if (Math.abs(intent.current) > 30) {\n        intent.current = 0;\n        wheelResidualMomentum.current = 0;\n        startTime.current = Date.now();\n        onSwipeStart();\n      } else {\n        var currentSwipeIntent = intent.current;\n        intentCleanup.current = setTimeout(function () {\n          intentCleanup.current = undefined;\n          if (currentSwipeIntent === intent.current) {\n            intent.current = 0;\n          }\n        }, swipeAnimationDuration);\n      }\n    } else if (swipeState === SwipeState.SWIPE) {\n      var newSwipeOffset = offset.current - event.deltaX;\n      newSwipeOffset = Math.min(Math.abs(newSwipeOffset), containerWidth) * Math.sign(newSwipeOffset);\n      offset.current = newSwipeOffset;\n      onSwipeProgress(newSwipeOffset);\n      cancelSwipeResetCleanup();\n      if (Math.abs(newSwipeOffset) > 0.2 * containerWidth) {\n        wheelResidualMomentum.current = event.deltaX;\n        onSwipeFinish(newSwipeOffset, Date.now() - startTime.current);\n        return;\n      }\n      resetCleanup.current = setTimeout(function () {\n        return handleCancelSwipe(newSwipeOffset);\n      }, 2 * swipeAnimationDuration);\n    } else {\n      wheelResidualMomentum.current = event.deltaX;\n    }\n  });\n  React.useEffect(function () {\n    return subscribeSensors(EVENT_ON_WHEEL, onWheel);\n  }, [subscribeSensors, onWheel]);\n}\nvar cssContainerPrefix = makeComposePrefix(\"container\");\nvar ControllerContext = React.createContext(null);\nvar useController = makeUseContext(\"useController\", \"ControllerContext\", ControllerContext);\nfunction Controller(_ref10) {\n  var _ref12;\n  var children = _ref10.children,\n    props = _objectWithoutProperties(_ref10, _excluded5);\n  var _a;\n  var carousel = props.carousel,\n    animation = props.animation,\n    controller = props.controller,\n    on = props.on,\n    styles = props.styles,\n    render = props.render;\n  var _React$useState15 = React.useState(),\n    _React$useState16 = _slicedToArray(_React$useState15, 2),\n    toolbarWidth = _React$useState16[0],\n    setToolbarWidth = _React$useState16[1];\n  var state = useLightboxState();\n  var dispatch = useLightboxDispatch();\n  var _React$useState17 = React.useState(SwipeState.NONE),\n    _React$useState18 = _slicedToArray(_React$useState17, 2),\n    swipeState = _React$useState18[0],\n    setSwipeState = _React$useState18[1];\n  var swipeOffset = React.useRef(0);\n  var pullDownOffset = React.useRef(0);\n  var pullDownOpacity = React.useRef(1);\n  var _useSensors = useSensors(),\n    registerSensors = _useSensors.registerSensors,\n    subscribeSensors = _useSensors.subscribeSensors;\n  var _useEvents2 = useEvents(),\n    subscribe = _useEvents2.subscribe,\n    publish = _useEvents2.publish;\n  var cleanupAnimationIncrement = useDelay();\n  var cleanupSwipeOffset = useDelay();\n  var cleanupPullDownOffset = useDelay();\n  var _useContainerRect = useContainerRect(),\n    containerRef = _useContainerRect.containerRef,\n    setContainerRef = _useContainerRect.setContainerRef,\n    containerRect = _useContainerRect.containerRect;\n  var handleContainerRef = useForkRef(usePreventSwipeNavigation(), setContainerRef);\n  var carouselRef = React.useRef(null);\n  var setCarouselRef = useForkRef(carouselRef, undefined);\n  var isRTL = useRTL();\n  var rtl = function rtl(value) {\n    return (isRTL ? -1 : 1) * (typeof value === \"number\" ? value : 1);\n  };\n  var focus = useEventCallback(function () {\n    var _a;\n    return (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n  });\n  var getLightboxProps = useEventCallback(function () {\n    return props;\n  });\n  var getLightboxState = useEventCallback(function () {\n    return state;\n  });\n  var prev = React.useCallback(function (params) {\n    return publish(ACTION_PREV, params);\n  }, [publish]);\n  var next = React.useCallback(function (params) {\n    return publish(ACTION_NEXT, params);\n  }, [publish]);\n  var close = React.useCallback(function () {\n    return publish(ACTION_CLOSE);\n  }, [publish]);\n  var isSwipeValid = function isSwipeValid(offset) {\n    return !(carousel.finite && (rtl(offset) > 0 && state.currentIndex === 0 || rtl(offset) < 0 && state.currentIndex === state.slides.length - 1));\n  };\n  var setSwipeOffset = function setSwipeOffset(offset) {\n    var _a;\n    swipeOffset.current = offset;\n    (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.style.setProperty(cssVar(\"swipe_offset\"), \"\".concat(Math.round(offset), \"px\"));\n  };\n  var pullDownEnabled = controller.closeOnPullDown;\n  var setPullDownOffset = function setPullDownOffset(offset) {\n    var _a, _b;\n    pullDownOffset.current = offset;\n    pullDownOpacity.current = function () {\n      var threshold = 60;\n      var minOpacity = 0.5;\n      return Math.min(Math.max(round(1 - offset / threshold * (1 - minOpacity), 2), minOpacity), 1);\n    }();\n    (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.style.setProperty(cssVar(\"pull_down_offset\"), \"\".concat(Math.round(offset), \"px\"));\n    (_b = containerRef.current) === null || _b === void 0 ? void 0 : _b.style.setProperty(cssVar(\"pull_down_opacity\"), \"\".concat(pullDownOpacity.current));\n  };\n  var _useAnimation = useAnimation(carouselRef, function (snapshot, rect, translate) {\n      if (carouselRef.current && containerRect) {\n        return {\n          keyframes: [{\n            transform: \"translate(0, \".concat(snapshot.rect.y - rect.y + translate.y, \"px)\"),\n            opacity: snapshot.opacity\n          }, {\n            transform: \"translate(0, 0)\",\n            opacity: 1\n          }],\n          duration: snapshot.duration,\n          easing: animation.easing.fade\n        };\n      }\n      return undefined;\n    }),\n    preparePullDownAnimation = _useAnimation.prepareAnimation;\n  var pullDown = function pullDown(offset, cancel) {\n    if (pullDownEnabled) {\n      setPullDownOffset(offset);\n      var duration = 0;\n      if (carouselRef.current) {\n        duration = animation.fade * (cancel ? 2 : 1);\n        preparePullDownAnimation({\n          rect: carouselRef.current.getBoundingClientRect(),\n          opacity: pullDownOpacity.current,\n          duration: duration\n        });\n      }\n      cleanupPullDownOffset(function () {\n        setPullDownOffset(0);\n        setSwipeState(SwipeState.NONE);\n      }, duration);\n      setSwipeState(SwipeState.ANIMATION);\n      if (!cancel) {\n        close();\n      }\n    }\n  };\n  var _useAnimation2 = useAnimation(carouselRef, function (snapshot, rect, translate) {\n      var _a;\n      if (carouselRef.current && containerRect && ((_a = state.animation) === null || _a === void 0 ? void 0 : _a.duration)) {\n        var parsedSpacing = parseLengthPercentage(carousel.spacing);\n        var spacingValue = (parsedSpacing.percent ? parsedSpacing.percent * containerRect.width / 100 : parsedSpacing.pixel) || 0;\n        return {\n          keyframes: [{\n            transform: \"translate(\".concat(rtl(state.globalIndex - snapshot.index) * (containerRect.width + spacingValue) + snapshot.rect.x - rect.x + translate.x, \"px, 0)\")\n          }, {\n            transform: \"translate(0, 0)\"\n          }],\n          duration: state.animation.duration,\n          easing: state.animation.easing\n        };\n      }\n      return undefined;\n    }),\n    prepareAnimation = _useAnimation2.prepareAnimation,\n    isAnimationPlaying = _useAnimation2.isAnimationPlaying;\n  var swipe = useEventCallback(function (action) {\n    var _a, _b;\n    var currentSwipeOffset = action.offset || 0;\n    var swipeDuration = !currentSwipeOffset ? (_a = animation.navigation) !== null && _a !== void 0 ? _a : animation.swipe : animation.swipe;\n    var swipeEasing = !currentSwipeOffset && !isAnimationPlaying() ? animation.easing.navigation : animation.easing.swipe;\n    var direction = action.direction;\n    var count = (_b = action.count) !== null && _b !== void 0 ? _b : 1;\n    var newSwipeState = SwipeState.ANIMATION;\n    var newSwipeAnimationDuration = swipeDuration * count;\n    if (!direction) {\n      var containerWidth = containerRect === null || containerRect === void 0 ? void 0 : containerRect.width;\n      var elapsedTime = action.duration || 0;\n      var expectedTime = containerWidth ? swipeDuration / containerWidth * Math.abs(currentSwipeOffset) : swipeDuration;\n      if (count !== 0) {\n        if (elapsedTime < expectedTime) {\n          newSwipeAnimationDuration = newSwipeAnimationDuration / expectedTime * Math.max(elapsedTime, expectedTime / 5);\n        } else if (containerWidth) {\n          newSwipeAnimationDuration = swipeDuration / containerWidth * (containerWidth - Math.abs(currentSwipeOffset));\n        }\n        direction = rtl(currentSwipeOffset) > 0 ? ACTION_PREV : ACTION_NEXT;\n      } else {\n        newSwipeAnimationDuration = swipeDuration / 2;\n      }\n    }\n    var increment = 0;\n    if (direction === ACTION_PREV) {\n      if (isSwipeValid(rtl(1))) {\n        increment = -count;\n      } else {\n        newSwipeState = SwipeState.NONE;\n        newSwipeAnimationDuration = swipeDuration;\n      }\n    } else if (direction === ACTION_NEXT) {\n      if (isSwipeValid(rtl(-1))) {\n        increment = count;\n      } else {\n        newSwipeState = SwipeState.NONE;\n        newSwipeAnimationDuration = swipeDuration;\n      }\n    }\n    newSwipeAnimationDuration = Math.round(newSwipeAnimationDuration);\n    cleanupSwipeOffset(function () {\n      setSwipeOffset(0);\n      setSwipeState(SwipeState.NONE);\n    }, newSwipeAnimationDuration);\n    if (carouselRef.current) {\n      prepareAnimation({\n        rect: carouselRef.current.getBoundingClientRect(),\n        index: state.globalIndex\n      });\n    }\n    setSwipeState(newSwipeState);\n    publish(ACTION_SWIPE, {\n      type: \"swipe\",\n      increment: increment,\n      duration: newSwipeAnimationDuration,\n      easing: swipeEasing\n    });\n  });\n  React.useEffect(function () {\n    var _a, _b;\n    if (((_a = state.animation) === null || _a === void 0 ? void 0 : _a.increment) && ((_b = state.animation) === null || _b === void 0 ? void 0 : _b.duration)) {\n      cleanupAnimationIncrement(function () {\n        return dispatch({\n          type: \"swipe\",\n          increment: 0\n        });\n      }, state.animation.duration);\n    }\n  }, [state.animation, dispatch, cleanupAnimationIncrement]);\n  var swipeParams = [subscribeSensors, isSwipeValid, (containerRect === null || containerRect === void 0 ? void 0 : containerRect.width) || 0, animation.swipe, function () {\n    return setSwipeState(SwipeState.SWIPE);\n  }, function (offset) {\n    return setSwipeOffset(offset);\n  }, function (offset, duration) {\n    return swipe({\n      offset: offset,\n      duration: duration,\n      count: 1\n    });\n  }, function (offset) {\n    return swipe({\n      offset: offset,\n      count: 0\n    });\n  }];\n  var pullDownParams = [function () {\n    if (pullDownEnabled) {\n      setSwipeState(SwipeState.PULL_DOWN);\n    }\n  }, function (offset) {\n    return setPullDownOffset(offset);\n  }, function (offset) {\n    return pullDown(offset);\n  }, function (offset) {\n    return pullDown(offset, true);\n  }];\n  usePointerSwipe.apply(void 0, swipeParams.concat([pullDownEnabled], pullDownParams));\n  useWheelSwipe.apply(void 0, [swipeState].concat(swipeParams));\n  var focusOnMount = useEventCallback(function () {\n    var _a;\n    if (controller.focus) {\n      (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n  });\n  React.useEffect(focusOnMount, [focusOnMount]);\n  var onViewCallback = useEventCallback(function () {\n    var _a;\n    (_a = on.view) === null || _a === void 0 ? void 0 : _a.call(on, {\n      index: state.currentIndex\n    });\n  });\n  React.useEffect(onViewCallback, [state.globalIndex, onViewCallback]);\n  React.useEffect(function () {\n    return cleanup(subscribe(ACTION_PREV, function (action) {\n      return swipe(_objectSpread({\n        direction: ACTION_PREV\n      }, action));\n    }), subscribe(ACTION_NEXT, function (action) {\n      return swipe(_objectSpread({\n        direction: ACTION_NEXT\n      }, action));\n    }), subscribe(ACTION_SWIPE, function (action) {\n      return dispatch(action);\n    }));\n  }, [subscribe, swipe, dispatch]);\n  React.useEffect(function () {\n    return subscribeSensors(EVENT_ON_KEY_UP, function (event) {\n      if (event.key === VK_ESCAPE) {\n        close();\n      }\n    });\n  }, [subscribeSensors, close]);\n  var context = React.useMemo(function () {\n    return {\n      prev: prev,\n      next: next,\n      close: close,\n      focus: focus,\n      slideRect: containerRect ? computeSlideRect(containerRect, carousel.padding) : {\n        width: 0,\n        height: 0\n      },\n      containerRect: containerRect || {\n        width: 0,\n        height: 0\n      },\n      subscribeSensors: subscribeSensors,\n      containerRef: containerRef,\n      setCarouselRef: setCarouselRef,\n      toolbarWidth: toolbarWidth,\n      setToolbarWidth: setToolbarWidth\n    };\n  }, [prev, next, close, focus, subscribeSensors, containerRect, containerRef, setCarouselRef, toolbarWidth, setToolbarWidth, carousel.padding]);\n  React.useImperativeHandle(controller.ref, function () {\n    return {\n      prev: prev,\n      next: next,\n      close: close,\n      focus: focus,\n      getLightboxProps: getLightboxProps,\n      getLightboxState: getLightboxState\n    };\n  }, [prev, next, close, focus, getLightboxProps, getLightboxState]);\n  return React.createElement(\"div\", _objectSpread(_objectSpread({\n    ref: handleContainerRef,\n    className: clsx(cssClass(cssContainerPrefix()), cssClass(CLASS_FLEX_CENTER)),\n    style: _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, swipeState === SwipeState.SWIPE ? _defineProperty({}, cssVar(\"swipe_offset\"), \"\".concat(Math.round(swipeOffset.current), \"px\")) : null), swipeState === SwipeState.PULL_DOWN ? (_ref12 = {}, _defineProperty(_ref12, cssVar(\"pull_down_offset\"), \"\".concat(Math.round(pullDownOffset.current), \"px\")), _defineProperty(_ref12, cssVar(\"pull_down_opacity\"), \"\".concat(pullDownOpacity.current)), _ref12) : null), controller.touchAction !== \"none\" ? _defineProperty({}, cssVar(\"controller_touch_action\"), controller.touchAction) : null), styles.container)\n  }, controller.aria ? {\n    role: \"presentation\",\n    \"aria-live\": \"polite\"\n  } : null), {}, {\n    tabIndex: -1\n  }, registerSensors), containerRect && React.createElement(ControllerContext.Provider, {\n    value: context\n  }, children, (_a = render.controls) === null || _a === void 0 ? void 0 : _a.call(render)));\n}\nvar ControllerModule = createModule(MODULE_CONTROLLER, Controller);\nfunction cssPrefix$2(value) {\n  return composePrefix(MODULE_CAROUSEL, value);\n}\nfunction cssSlidePrefix(value) {\n  return composePrefix(\"slide\", value);\n}\nfunction CarouselSlide(_ref14) {\n  var slide = _ref14.slide,\n    offset = _ref14.offset;\n  var containerRef = React.useRef(null);\n  var _useLightboxState = useLightboxState(),\n    currentIndex = _useLightboxState.currentIndex;\n  var _useController = useController(),\n    slideRect = _useController.slideRect,\n    close = _useController.close;\n  var _useLightboxProps2 = useLightboxProps(),\n    render = _useLightboxProps2.render,\n    _useLightboxProps2$ca = _useLightboxProps2.carousel,\n    imageFit = _useLightboxProps2$ca.imageFit,\n    imageProps = _useLightboxProps2$ca.imageProps,\n    onClick = _useLightboxProps2.on.click,\n    closeOnBackdropClick = _useLightboxProps2.controller.closeOnBackdropClick,\n    style = _useLightboxProps2.styles.slide;\n  var renderSlide = function renderSlide() {\n    var _a, _b, _c, _d;\n    var rendered = (_a = render.slide) === null || _a === void 0 ? void 0 : _a.call(render, {\n      slide: slide,\n      offset: offset,\n      rect: slideRect\n    });\n    if (!rendered && isImageSlide(slide)) {\n      rendered = React.createElement(ImageSlide, {\n        slide: slide,\n        offset: offset,\n        render: render,\n        rect: slideRect,\n        imageFit: imageFit,\n        imageProps: imageProps,\n        onClick: offset === 0 ? function () {\n          return onClick === null || onClick === void 0 ? void 0 : onClick({\n            index: currentIndex\n          });\n        } : undefined\n      });\n    }\n    return rendered ? React.createElement(React.Fragment, null, (_b = render.slideHeader) === null || _b === void 0 ? void 0 : _b.call(render, {\n      slide: slide\n    }), ((_c = render.slideContainer) !== null && _c !== void 0 ? _c : function (_ref15) {\n      var children = _ref15.children;\n      return children;\n    })({\n      slide: slide,\n      children: rendered\n    }), (_d = render.slideFooter) === null || _d === void 0 ? void 0 : _d.call(render, {\n      slide: slide\n    })) : null;\n  };\n  var handleBackdropClick = function handleBackdropClick(event) {\n    var container = containerRef.current;\n    var target = event.target instanceof HTMLElement ? event.target : undefined;\n    if (closeOnBackdropClick && target && container && (target === container || Array.from(container.children).find(function (x) {\n      return x === target;\n    }) && target.classList.contains(cssClass(CLASS_FULLSIZE)))) {\n      close();\n    }\n  };\n  return React.createElement(\"div\", {\n    ref: containerRef,\n    className: clsx(cssClass(cssSlidePrefix()), offset === 0 && cssClass(cssSlidePrefix(\"current\")), cssClass(CLASS_FLEX_CENTER)),\n    onClick: handleBackdropClick,\n    style: style\n  }, renderSlide());\n}\nfunction Placeholder() {\n  var style = useLightboxProps().styles.slide;\n  return React.createElement(\"div\", {\n    className: cssClass(\"slide\"),\n    style: style\n  });\n}\nfunction Carousel(_ref16) {\n  var _style;\n  var _ref16$carousel = _ref16.carousel,\n    finite = _ref16$carousel.finite,\n    preload = _ref16$carousel.preload,\n    padding = _ref16$carousel.padding,\n    spacing = _ref16$carousel.spacing;\n  var _useLightboxState2 = useLightboxState(),\n    slides = _useLightboxState2.slides,\n    currentIndex = _useLightboxState2.currentIndex,\n    globalIndex = _useLightboxState2.globalIndex;\n  var _useController2 = useController(),\n    setCarouselRef = _useController2.setCarouselRef;\n  var spacingValue = parseLengthPercentage(spacing);\n  var paddingValue = parseLengthPercentage(padding);\n  var items = [];\n  if ((slides === null || slides === void 0 ? void 0 : slides.length) > 0) {\n    for (var i = currentIndex - preload; i < currentIndex; i += 1) {\n      var key = globalIndex + i - currentIndex;\n      items.push(!finite || i >= 0 ? React.createElement(CarouselSlide, {\n        key: key,\n        slide: slides[(i + preload * slides.length) % slides.length],\n        offset: i - currentIndex\n      }) : React.createElement(Placeholder, {\n        key: key\n      }));\n    }\n    items.push(React.createElement(CarouselSlide, {\n      key: globalIndex,\n      slide: slides[currentIndex],\n      offset: 0\n    }));\n    for (var _i = currentIndex + 1; _i <= currentIndex + preload; _i += 1) {\n      var _key7 = globalIndex + _i - currentIndex;\n      items.push(!finite || _i <= slides.length - 1 ? React.createElement(CarouselSlide, {\n        key: _key7,\n        slide: slides[_i % slides.length],\n        offset: _i - currentIndex\n      }) : React.createElement(Placeholder, {\n        key: _key7\n      }));\n    }\n  }\n  return React.createElement(\"div\", {\n    ref: setCarouselRef,\n    className: clsx(cssClass(cssPrefix$2()), items.length > 0 && cssClass(cssPrefix$2(\"with_slides\"))),\n    style: (_style = {}, _defineProperty(_style, \"\".concat(cssVar(cssPrefix$2(\"slides_count\"))), items.length), _defineProperty(_style, \"\".concat(cssVar(cssPrefix$2(\"spacing_px\"))), spacingValue.pixel || 0), _defineProperty(_style, \"\".concat(cssVar(cssPrefix$2(\"spacing_percent\"))), spacingValue.percent || 0), _defineProperty(_style, \"\".concat(cssVar(cssPrefix$2(\"padding_px\"))), paddingValue.pixel || 0), _defineProperty(_style, \"\".concat(cssVar(cssPrefix$2(\"padding_percent\"))), paddingValue.percent || 0), _style)\n  }, items);\n}\nvar CarouselModule = createModule(MODULE_CAROUSEL, Carousel);\nfunction NavigationButton(_ref17) {\n  var label = _ref17.label,\n    icon = _ref17.icon,\n    renderIcon = _ref17.renderIcon,\n    action = _ref17.action,\n    onClick = _ref17.onClick,\n    disabled = _ref17.disabled,\n    style = _ref17.style;\n  return React.createElement(IconButton, _objectSpread({\n    label: label,\n    icon: icon,\n    renderIcon: renderIcon,\n    className: cssClass(\"navigation_\".concat(action)),\n    disabled: disabled,\n    onClick: onClick,\n    style: style\n  }, useLoseFocus(useController().focus, disabled)));\n}\nfunction Navigation(_ref18) {\n  var finite = _ref18.carousel.finite,\n    animation = _ref18.animation,\n    _ref18$render = _ref18.render,\n    buttonPrev = _ref18$render.buttonPrev,\n    buttonNext = _ref18$render.buttonNext,\n    iconPrev = _ref18$render.iconPrev,\n    iconNext = _ref18$render.iconNext,\n    styles = _ref18.styles;\n  var _a;\n  var _useLightboxState3 = useLightboxState(),\n    slides = _useLightboxState3.slides,\n    currentIndex = _useLightboxState3.currentIndex;\n  var _useController3 = useController(),\n    prev = _useController3.prev,\n    next = _useController3.next,\n    subscribeSensors = _useController3.subscribeSensors;\n  var isRTL = useRTL();\n  var prevDisabled = slides.length === 0 || finite && currentIndex === 0;\n  var nextDisabled = slides.length === 0 || finite && currentIndex === slides.length - 1;\n  var throttle = ((_a = animation.navigation) !== null && _a !== void 0 ? _a : animation.swipe) / 2;\n  var prevThrottled = useThrottle(prev, throttle);\n  var nextThrottled = useThrottle(next, throttle);\n  var handleKeyDown = useEventCallback(function (event) {\n    if (event.key === VK_ARROW_LEFT && !(isRTL ? nextDisabled : prevDisabled)) {\n      (isRTL ? nextThrottled : prevThrottled)();\n    }\n    if (event.key === VK_ARROW_RIGHT && !(isRTL ? prevDisabled : nextDisabled)) {\n      (isRTL ? prevThrottled : nextThrottled)();\n    }\n  });\n  React.useEffect(function () {\n    return subscribeSensors(EVENT_ON_KEY_DOWN, handleKeyDown);\n  }, [subscribeSensors, handleKeyDown]);\n  return React.createElement(React.Fragment, null, buttonPrev ? buttonPrev() : React.createElement(NavigationButton, {\n    label: \"Previous\",\n    action: ACTION_PREV,\n    icon: PreviousIcon,\n    renderIcon: iconPrev,\n    style: styles.navigationPrev,\n    disabled: prevDisabled,\n    onClick: prev\n  }), buttonNext ? buttonNext() : React.createElement(NavigationButton, {\n    label: \"Next\",\n    action: ACTION_NEXT,\n    icon: NextIcon,\n    renderIcon: iconNext,\n    style: styles.navigationNext,\n    disabled: nextDisabled,\n    onClick: next\n  }));\n}\nvar NavigationModule = createModule(MODULE_NAVIGATION, Navigation);\nvar noScroll = cssClass(CLASS_NO_SCROLL);\nvar noScrollPadding = cssClass(CLASS_NO_SCROLL_PADDING);\nfunction isHTMLElement(element) {\n  return \"style\" in element;\n}\nfunction padScrollbar(element, padding, rtl) {\n  var styles = window.getComputedStyle(element);\n  var property = rtl ? \"padding-left\" : \"padding-right\";\n  var computedValue = rtl ? styles.paddingLeft : styles.paddingRight;\n  var originalValue = element.style.getPropertyValue(property);\n  element.style.setProperty(property, \"\".concat((parseInt(computedValue, 10) || 0) + padding, \"px\"));\n  return function () {\n    if (originalValue) {\n      element.style.setProperty(property, originalValue);\n    } else {\n      element.style.removeProperty(property);\n    }\n  };\n}\nfunction NoScroll(_ref19) {\n  var children = _ref19.children;\n  var rtl = useRTL();\n  useLayoutEffect(function () {\n    var cleanup = [];\n    var _document = document,\n      body = _document.body,\n      documentElement = _document.documentElement;\n    var scrollbar = Math.round(window.innerWidth - documentElement.clientWidth);\n    if (scrollbar > 0) {\n      cleanup.push(padScrollbar(body, scrollbar, rtl));\n      var elements = body.getElementsByTagName(\"*\");\n      for (var i = 0; i < elements.length; i += 1) {\n        var element = elements[i];\n        if (isHTMLElement(element) && window.getComputedStyle(element).getPropertyValue(\"position\") === \"fixed\" && !element.classList.contains(noScrollPadding)) {\n          cleanup.push(padScrollbar(element, scrollbar, rtl));\n        }\n      }\n    }\n    body.classList.add(noScroll);\n    return function () {\n      body.classList.remove(noScroll);\n      cleanup.forEach(function (clean) {\n        return clean();\n      });\n    };\n  }, [rtl]);\n  return React.createElement(React.Fragment, null, children);\n}\nvar NoScrollModule = createModule(MODULE_NO_SCROLL, NoScroll);\nfunction cssPrefix$1(value) {\n  return composePrefix(MODULE_PORTAL, value);\n}\nfunction setAttribute(element, attribute, value) {\n  var previousValue = element.getAttribute(attribute);\n  element.setAttribute(attribute, value);\n  return function () {\n    if (previousValue) {\n      element.setAttribute(attribute, previousValue);\n    } else {\n      element.removeAttribute(attribute);\n    }\n  };\n}\nfunction Portal(_ref20) {\n  var children = _ref20.children,\n    animation = _ref20.animation,\n    styles = _ref20.styles,\n    className = _ref20.className,\n    on = _ref20.on,\n    portal = _ref20.portal,\n    close = _ref20.close;\n  var _React$useState19 = React.useState(false),\n    _React$useState20 = _slicedToArray(_React$useState19, 2),\n    mounted = _React$useState20[0],\n    setMounted = _React$useState20[1];\n  var _React$useState21 = React.useState(false),\n    _React$useState22 = _slicedToArray(_React$useState21, 2),\n    visible = _React$useState22[0],\n    setVisible = _React$useState22[1];\n  var cleanup = React.useRef([]);\n  var _useTimeouts4 = useTimeouts(),\n    setTimeout = _useTimeouts4.setTimeout;\n  var _useEvents3 = useEvents(),\n    subscribe = _useEvents3.subscribe;\n  var reduceMotion = useMotionPreference();\n  var animationDuration = !reduceMotion ? animation.fade : 0;\n  React.useEffect(function () {\n    setMounted(true);\n    return function () {\n      setMounted(false);\n      setVisible(false);\n    };\n  }, []);\n  var handleClose = useEventCallback(function () {\n    var _a;\n    setVisible(false);\n    (_a = on.exiting) === null || _a === void 0 ? void 0 : _a.call(on);\n    setTimeout(function () {\n      var _a;\n      (_a = on.exited) === null || _a === void 0 ? void 0 : _a.call(on);\n      close();\n    }, animationDuration);\n  });\n  React.useEffect(function () {\n    return subscribe(ACTION_CLOSE, handleClose);\n  }, [subscribe, handleClose]);\n  var handleEnter = useEventCallback(function (node) {\n    var _a, _b, _c;\n    node.scrollTop;\n    setVisible(true);\n    (_a = on.entering) === null || _a === void 0 ? void 0 : _a.call(on);\n    var elements = (_c = (_b = node.parentNode) === null || _b === void 0 ? void 0 : _b.children) !== null && _c !== void 0 ? _c : [];\n    for (var i = 0; i < elements.length; i += 1) {\n      var element = elements[i];\n      if ([\"TEMPLATE\", \"SCRIPT\", \"STYLE\"].indexOf(element.tagName) === -1 && element !== node) {\n        cleanup.current.push(setAttribute(element, \"inert\", \"true\"));\n        cleanup.current.push(setAttribute(element, \"aria-hidden\", \"true\"));\n      }\n    }\n    setTimeout(function () {\n      var _a;\n      (_a = on.entered) === null || _a === void 0 ? void 0 : _a.call(on);\n    }, animationDuration);\n  });\n  var handleExit = useEventCallback(function () {\n    cleanup.current.forEach(function (clean) {\n      return clean();\n    });\n    cleanup.current = [];\n  });\n  var handleRef = React.useCallback(function (node) {\n    if (node) {\n      handleEnter(node);\n    } else {\n      handleExit();\n    }\n  }, [handleEnter, handleExit]);\n  return mounted ? createPortal(React.createElement(\"div\", {\n    ref: handleRef,\n    className: clsx(className, cssClass(\"root\"), cssClass(cssPrefix$1()), cssClass(CLASS_NO_SCROLL_PADDING), visible && cssClass(cssPrefix$1(\"open\"))),\n    role: \"presentation\",\n    \"aria-live\": \"polite\",\n    style: _objectSpread(_objectSpread(_objectSpread({}, animation.fade !== LightboxDefaultProps.animation.fade ? _defineProperty({}, cssVar(\"fade_animation_duration\"), \"\".concat(animationDuration, \"ms\")) : null), animation.easing.fade !== LightboxDefaultProps.animation.easing.fade ? _defineProperty({}, cssVar(\"fade_animation_timing_function\"), animation.easing.fade) : null), styles.root)\n  }, children), portal.root || document.body) : null;\n}\nvar PortalModule = createModule(MODULE_PORTAL, Portal);\nfunction Root(_ref23) {\n  var children = _ref23.children;\n  return React.createElement(React.Fragment, null, children);\n}\nvar RootModule = createModule(MODULE_ROOT, Root);\nfunction cssPrefix(value) {\n  return composePrefix(MODULE_TOOLBAR, value);\n}\nfunction Toolbar(_ref24) {\n  var buttons = _ref24.toolbar.buttons,\n    _ref24$render = _ref24.render,\n    buttonClose = _ref24$render.buttonClose,\n    iconClose = _ref24$render.iconClose,\n    styles = _ref24.styles;\n  var _useController4 = useController(),\n    close = _useController4.close,\n    setToolbarWidth = _useController4.setToolbarWidth;\n  var _useContainerRect2 = useContainerRect(),\n    setContainerRef = _useContainerRect2.setContainerRef,\n    containerRect = _useContainerRect2.containerRect;\n  useLayoutEffect(function () {\n    setToolbarWidth(containerRect === null || containerRect === void 0 ? void 0 : containerRect.width);\n  }, [setToolbarWidth, containerRect === null || containerRect === void 0 ? void 0 : containerRect.width]);\n  var renderCloseButton = function renderCloseButton() {\n    if (buttonClose) return buttonClose();\n    return React.createElement(IconButton, {\n      key: ACTION_CLOSE,\n      label: \"Close\",\n      icon: CloseIcon,\n      renderIcon: iconClose,\n      onClick: close\n    });\n  };\n  return React.createElement(\"div\", _objectSpread({\n    ref: setContainerRef,\n    style: styles.toolbar,\n    className: cssClass(cssPrefix())\n  }, stopNavigationEventsPropagation()), buttons === null || buttons === void 0 ? void 0 : buttons.map(function (button) {\n    return button === ACTION_CLOSE ? renderCloseButton() : button;\n  }));\n}\nvar ToolbarModule = createModule(MODULE_TOOLBAR, Toolbar);\nfunction renderNode(node, props) {\n  var _a;\n  return React.createElement(node.module.component, _objectSpread({\n    key: node.module.name\n  }, props), (_a = node.children) === null || _a === void 0 ? void 0 : _a.map(function (child) {\n    return renderNode(child, props);\n  }));\n}\nfunction mergeAnimation(defaultAnimation) {\n  var animation = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var defaultAnimationEasing = defaultAnimation.easing,\n    restDefaultAnimation = _objectWithoutProperties(defaultAnimation, _excluded6);\n  var easing = animation.easing,\n    restAnimation = _objectWithoutProperties(animation, _excluded7);\n  return _objectSpread(_objectSpread({\n    easing: _objectSpread(_objectSpread({}, defaultAnimationEasing), easing)\n  }, restDefaultAnimation), restAnimation);\n}\nfunction Lightbox(_ref25) {\n  var carousel = _ref25.carousel,\n    animation = _ref25.animation,\n    render = _ref25.render,\n    toolbar = _ref25.toolbar,\n    controller = _ref25.controller,\n    on = _ref25.on,\n    plugins = _ref25.plugins,\n    slides = _ref25.slides,\n    index = _ref25.index,\n    restProps = _objectWithoutProperties(_ref25, _excluded8);\n  var defaultAnimation = LightboxDefaultProps.animation,\n    defaultCarousel = LightboxDefaultProps.carousel,\n    defaultRender = LightboxDefaultProps.render,\n    defaultToolbar = LightboxDefaultProps.toolbar,\n    defaultController = LightboxDefaultProps.controller,\n    defaultOn = LightboxDefaultProps.on,\n    defaultSlides = LightboxDefaultProps.slides,\n    defaultIndex = LightboxDefaultProps.index,\n    defaultPlugins = LightboxDefaultProps.plugins,\n    restDefaultProps = _objectWithoutProperties(LightboxDefaultProps, _excluded9);\n  var _withPlugins = withPlugins([createNode(PortalModule, [createNode(NoScrollModule, [createNode(ControllerModule, [createNode(CarouselModule), createNode(ToolbarModule), createNode(NavigationModule)])])])], plugins || defaultPlugins),\n    config = _withPlugins.config,\n    augmentation = _withPlugins.augmentation;\n  var props = augmentation(_objectSpread(_objectSpread({\n    animation: mergeAnimation(defaultAnimation, animation),\n    carousel: _objectSpread(_objectSpread({}, defaultCarousel), carousel),\n    render: _objectSpread(_objectSpread({}, defaultRender), render),\n    toolbar: _objectSpread(_objectSpread({}, defaultToolbar), toolbar),\n    controller: _objectSpread(_objectSpread({}, defaultController), controller),\n    on: _objectSpread(_objectSpread({}, defaultOn), on)\n  }, restDefaultProps), restProps));\n  if (!props.open) return null;\n  return React.createElement(LightboxPropsProvider, _objectSpread({}, props), React.createElement(LightboxStateProvider, {\n    slides: slides || defaultSlides,\n    index: index || defaultIndex\n  }, React.createElement(TimeoutsProvider, null, React.createElement(EventsProvider, null, renderNode(createNode(RootModule, config), props)))));\n}\nexport { ACTION_CLOSE, ACTION_NEXT, ACTION_PREV, ACTION_SWIPE, CLASS_FLEX_CENTER, CLASS_FULLSIZE, CLASS_NO_SCROLL, CLASS_NO_SCROLL_PADDING, Carousel, CarouselModule, CloseIcon, Controller, ControllerContext, ControllerModule, ELEMENT_BUTTON, ELEMENT_ICON, EVENT_ON_KEY_DOWN, EVENT_ON_KEY_UP, EVENT_ON_POINTER_CANCEL, EVENT_ON_POINTER_DOWN, EVENT_ON_POINTER_LEAVE, EVENT_ON_POINTER_MOVE, EVENT_ON_POINTER_UP, EVENT_ON_WHEEL, ErrorIcon, EventsContext, EventsProvider, IMAGE_FIT_CONTAIN, IMAGE_FIT_COVER, IconButton, ImageSlide, Lightbox, LightboxDefaultProps, LightboxDispatchContext, LightboxPropsContext, LightboxPropsProvider, LightboxStateContext, LightboxStateProvider, LoadingIcon, MODULE_CAROUSEL, MODULE_CONTROLLER, MODULE_NAVIGATION, MODULE_NO_SCROLL, MODULE_PORTAL, MODULE_ROOT, MODULE_TOOLBAR, Navigation, NavigationButton, NavigationModule, NextIcon, NoScroll, NoScrollModule, Portal, PortalModule, PreviousIcon, Root, RootModule, SLIDE_STATUS_COMPLETE, SLIDE_STATUS_ERROR, SLIDE_STATUS_LOADING, SLIDE_STATUS_PLACEHOLDER, SwipeState, TimeoutsContext, TimeoutsProvider, Toolbar, ToolbarModule, UNKNOWN_ACTION_TYPE, VK_ARROW_LEFT, VK_ARROW_RIGHT, VK_ESCAPE, activeSlideStatus, addToolbarButton, cleanup, clsx, composePrefix, computeSlideRect, createIcon, createIconDisabled, createModule, createNode, cssClass, cssVar, Lightbox as default, devicePixelRatio, getSlide, getSlideIfPresent, getSlideIndex, hasSlides, hasWindow, isImageFitCover, isImageSlide, label, makeComposePrefix, makeUseContext, parseLengthPercentage, round, setRef, stopNavigationEventsPropagation, useAnimation, useContainerRect, useController, useDelay, useEventCallback, useEvents, useForkRef, useLayoutEffect, useLightboxDispatch, useLightboxProps, useLightboxState, useLoseFocus, useMotionPreference, usePointerEvents, usePointerSwipe, usePreventSwipeNavigation, useRTL, useSensors, useThrottle, useTimeouts, useWheelSwipe, withPlugins };","map":{"version":3,"names":["_defineProperty","_slicedToArray","_objectSpread","_objectWithoutProperties","_toConsumableArray","_excluded","_excluded2","_excluded3","_excluded4","_excluded5","_excluded6","_excluded7","_excluded8","_excluded9","React","ACTION_CLOSE","IMAGE_FIT_CONTAIN","MODULE_CONTROLLER","IMAGE_FIT_COVER","UNKNOWN_ACTION_TYPE","ELEMENT_BUTTON","ELEMENT_ICON","EVENT_ON_POINTER_DOWN","EVENT_ON_POINTER_MOVE","EVENT_ON_POINTER_UP","EVENT_ON_POINTER_LEAVE","EVENT_ON_POINTER_CANCEL","EVENT_ON_KEY_DOWN","EVENT_ON_KEY_UP","EVENT_ON_WHEEL","SLIDE_STATUS_LOADING","activeSlideStatus","SLIDE_STATUS_COMPLETE","SLIDE_STATUS_ERROR","SLIDE_STATUS_PLACEHOLDER","ACTION_PREV","ACTION_NEXT","ACTION_SWIPE","VK_ESCAPE","CLASS_FLEX_CENTER","MODULE_CAROUSEL","CLASS_FULLSIZE","VK_ARROW_LEFT","VK_ARROW_RIGHT","MODULE_NAVIGATION","CLASS_NO_SCROLL","CLASS_NO_SCROLL_PADDING","MODULE_NO_SCROLL","MODULE_PORTAL","MODULE_ROOT","MODULE_TOOLBAR","createPortal","ACTIVE_SLIDE_COMPLETE","ACTIVE_SLIDE_ERROR","ACTIVE_SLIDE_LOADING","ACTIVE_SLIDE_PLAYING","PLUGIN_CAPTIONS","PLUGIN_COUNTER","PLUGIN_DOWNLOAD","PLUGIN_FULLSCREEN","PLUGIN_INLINE","PLUGIN_SHARE","PLUGIN_SLIDESHOW","PLUGIN_THUMBNAILS","PLUGIN_ZOOM","SLIDE_STATUS_PLAYING","LightboxDefaultProps","open","close","index","slides","render","plugins","toolbar","buttons","labels","animation","fade","swipe","easing","navigation","carousel","finite","preload","padding","spacing","imageFit","imageProps","controller","ref","focus","aria","touchAction","closeOnPullDown","closeOnBackdropClick","portal","on","styles","className","createModule","name","component","createNode","module","children","traverseNode","node","target","apply","flatMap","n","_a","traverse","nodes","withPlugins","root","arguments","length","undefined","augmentations","config","contains","pop","push","addParent","append","addChild","precede","concat","addSibling","addModule","replace","remove","augment","augmentation","forEach","plugin","props","reduce","acc","clsx","_len","classes","Array","_key","filter","cls","Boolean","join","cssPrefix$3","cssClass","cssVar","composePrefix","base","prefix","makeComposePrefix","label","lbl","cleanup","_len2","cleaners","_key2","cleaner","makeUseContext","contextName","context","ctx","useContext","Error","hasWindow","window","round","value","decimals","factor","Math","pow","Number","EPSILON","isImageSlide","slide","type","isImageFitCover","image","parseLengthPercentage","input","pixel","parseInt","endsWith","percent","computeSlideRect","containerRect","paddingValue","paddingPixels","width","max","height","devicePixelRatio","getSlideIndex","slidesCount","hasSlides","getSlide","getSlideIfPresent","addToolbarButton","key","button","restToolbar","findIndex","item","buttonWithKey","isValidElement","cloneElement","result","splice","stopNavigationEventsPropagation","stopPropagation","event","onPointerDown","onKeyDown","onWheel","EventsContext","createContext","useEvents","EventsProvider","_ref","_React$useState","useState","_React$useState2","subscriptions","useEffect","Object","keys","topic","useMemo","unsubscribe","callback","_a2","cb","subscribe","publish","_len3","_ref2","_key3","createElement","Provider","LightboxPropsContext","useLightboxProps","LightboxPropsProvider","_ref3","LightboxStateContext","useLightboxState","LightboxDispatchContext","useLightboxDispatch","reducer","state","action","increment","globalIndex","currentIndex","currentSlide","duration","LightboxStateProvider","_ref4","_React$useReducer","useReducer","_React$useReducer2","dispatch","TimeoutsContext","useTimeouts","TimeoutsProvider","_ref5","_React$useState3","_React$useState4","timeouts","tid","clearTimeout","removeTimeout","id","setTimeout","fn","delay","IconButton","forwardRef","_ref6","label$1","Icon","icon","renderIcon","onClick","style","rest","_useLightboxProps","svgIcon","xmlns","viewBox","focusable","displayName","createIcon","glyph","fill","d","createIconDisabled","Fragment","stroke","strokeWidth","mask","CloseIcon","PreviousIcon","NextIcon","LoadingIcon","from","map","_","array","x1","y1","x2","y2","strokeLinecap","strokeOpacity","transform","ErrorIcon","useLayoutEffect","useMotionPreference","_React$useState5","_React$useState6","reduceMotion","setReduceMotion","_b","mediaQuery","matchMedia","call","matches","listener","addEventListener","removeEventListener","currentTransformation","x","y","z","matrix","getComputedStyle","matcher","match","values","split","str","useAnimation","nodeRef","computeAnimation","snapshot","useRef","_c","current","_ref7","getBoundingClientRect","keyframes","onfinish","cancel","animate","err","console","error","prepareAnimation","currentSnapshot","isAnimationPlaying","playState","useContainerRect","_React$useState7","_React$useState8","setContainerRect","containerRef","observerRef","setContainerRef","useCallback","disconnect","updateContainerRect","parse","parseFloat","clientWidth","paddingLeft","paddingRight","clientHeight","paddingTop","paddingBottom","ResizeObserver","observe","useDelay","timeoutId","_useTimeouts","useEventCallback","_a3","_len4","args","_key4","setRef","useForkRef","refA","refB","refValue","useLoseFocus","disabled","focused","onFocus","onBlur","useRTL","_React$useState9","_React$useState10","isRTL","setIsRTL","document","documentElement","direction","useSensors","_React$useState11","_React$useState12","subscribers","notifySubscribers","isPropagationStopped","registerSensors","onPointerMove","onPointerUp","onPointerLeave","onPointerCancel","onKeyUp","subscribeSensors","unshift","listeners","el","useThrottle","lastCallbackTime","delayCallback","executeCallback","Date","now","_len5","_key5","_len6","_key6","slidePrefix","slideImagePrefix","ImageSlide","_ref8","offset","rect","onLoad","_d","_e","_f","_g","_React$useState13","_React$useState14","status","setStatus","_useEvents","_useTimeouts2","imageRef","handleLoading","img","decode","Promise","resolve","catch","then","parentNode","setImageRef","complete","handleOnLoad","currentTarget","onError","cover","nonInfinite","fallback","isFinite","maxWidth","srcSet","naturalWidth","maxHeight","naturalHeight","defaultStyle","sort","a","b","src","estimateActualWidth","MAX_VALUE","sizes","min","_ref9","imagePropsStyle","imagePropsClassName","restImageProps","draggable","alt","iconLoading","iconError","SwipeState","usePointerEvents","Gesture","SWIPE_THRESHOLD","usePointerSwipe","isSwipeValid","containerWidth","swipeAnimationDuration","onSwipeStart","onSwipeProgress","onSwipeFinish","onSwipeCancel","pullDownEnabled","onPullDownStart","onPullDownProgress","onPullDownFinish","onPullDownCancel","pointers","activePointer","startTime","gesture","NONE","clearPointer","pointerId","currentPointers","p","addPointer","persist","find","currentOffset","SWIPE","abs","PULL_DOWN","pointer","isCurrentPointer","deltaX","clientX","deltaY","clientY","startGesture","newGesture","WHEEL","preventDefault","ctrlKey","usePreventSwipeNavigation","passive","useWheelSwipe","swipeState","intent","intentCleanup","resetCleanup","wheelResidualMomentum","_useTimeouts3","cancelSwipeIntentCleanup","cancelSwipeResetCleanup","handleCleanup","handleCancelSwipe","currentSwipeOffset","currentSwipeIntent","newSwipeOffset","sign","cssContainerPrefix","ControllerContext","useController","Controller","_ref10","_ref12","_React$useState15","_React$useState16","toolbarWidth","setToolbarWidth","_React$useState17","_React$useState18","setSwipeState","swipeOffset","pullDownOffset","pullDownOpacity","_useSensors","_useEvents2","cleanupAnimationIncrement","cleanupSwipeOffset","cleanupPullDownOffset","_useContainerRect","handleContainerRef","carouselRef","setCarouselRef","rtl","getLightboxProps","getLightboxState","prev","params","next","setSwipeOffset","setProperty","setPullDownOffset","threshold","minOpacity","_useAnimation","translate","opacity","preparePullDownAnimation","pullDown","ANIMATION","_useAnimation2","parsedSpacing","spacingValue","swipeDuration","swipeEasing","count","newSwipeState","newSwipeAnimationDuration","elapsedTime","expectedTime","swipeParams","pullDownParams","focusOnMount","onViewCallback","view","slideRect","useImperativeHandle","container","role","tabIndex","controls","ControllerModule","cssPrefix$2","cssSlidePrefix","CarouselSlide","_ref14","_useLightboxState","_useController","_useLightboxProps2","_useLightboxProps2$ca","click","renderSlide","rendered","slideHeader","slideContainer","_ref15","slideFooter","handleBackdropClick","HTMLElement","classList","Placeholder","Carousel","_ref16","_style","_ref16$carousel","_useLightboxState2","_useController2","items","i","CarouselModule","NavigationButton","_ref17","Navigation","_ref18","_ref18$render","buttonPrev","buttonNext","iconPrev","iconNext","_useLightboxState3","_useController3","prevDisabled","nextDisabled","throttle","prevThrottled","nextThrottled","handleKeyDown","navigationPrev","navigationNext","NavigationModule","noScroll","noScrollPadding","isHTMLElement","element","padScrollbar","property","computedValue","originalValue","getPropertyValue","removeProperty","NoScroll","_ref19","_document","body","scrollbar","innerWidth","elements","getElementsByTagName","add","clean","NoScrollModule","cssPrefix$1","setAttribute","attribute","previousValue","getAttribute","removeAttribute","Portal","_ref20","_React$useState19","_React$useState20","mounted","setMounted","_React$useState21","_React$useState22","visible","setVisible","_useTimeouts4","_useEvents3","animationDuration","handleClose","exiting","exited","handleEnter","scrollTop","entering","indexOf","tagName","entered","handleExit","handleRef","PortalModule","Root","_ref23","RootModule","cssPrefix","Toolbar","_ref24","_ref24$render","buttonClose","iconClose","_useController4","_useContainerRect2","renderCloseButton","ToolbarModule","renderNode","child","mergeAnimation","defaultAnimation","defaultAnimationEasing","restDefaultAnimation","restAnimation","Lightbox","_ref25","restProps","defaultCarousel","defaultRender","defaultToolbar","defaultController","defaultOn","defaultSlides","defaultIndex","defaultPlugins","restDefaultProps","_withPlugins","default"],"sources":["/Users/anshugarg/Desktop/aa/node_modules/yet-another-react-lightbox/dist/index.js"],"sourcesContent":["'use client';\nimport * as React from 'react';\nimport { ACTION_CLOSE, IMAGE_FIT_CONTAIN, MODULE_CONTROLLER, IMAGE_FIT_COVER, UNKNOWN_ACTION_TYPE, ELEMENT_BUTTON, ELEMENT_ICON, EVENT_ON_POINTER_DOWN, EVENT_ON_POINTER_MOVE, EVENT_ON_POINTER_UP, EVENT_ON_POINTER_LEAVE, EVENT_ON_POINTER_CANCEL, EVENT_ON_KEY_DOWN, EVENT_ON_KEY_UP, EVENT_ON_WHEEL, SLIDE_STATUS_LOADING, activeSlideStatus, SLIDE_STATUS_COMPLETE, SLIDE_STATUS_ERROR, SLIDE_STATUS_PLACEHOLDER, ACTION_PREV, ACTION_NEXT, ACTION_SWIPE, VK_ESCAPE, CLASS_FLEX_CENTER, MODULE_CAROUSEL, CLASS_FULLSIZE, VK_ARROW_LEFT, VK_ARROW_RIGHT, MODULE_NAVIGATION, CLASS_NO_SCROLL, CLASS_NO_SCROLL_PADDING, MODULE_NO_SCROLL, MODULE_PORTAL, MODULE_ROOT, MODULE_TOOLBAR } from './types.js';\nimport { createPortal } from 'react-dom';\nexport { ACTIVE_SLIDE_COMPLETE, ACTIVE_SLIDE_ERROR, ACTIVE_SLIDE_LOADING, ACTIVE_SLIDE_PLAYING, PLUGIN_CAPTIONS, PLUGIN_COUNTER, PLUGIN_DOWNLOAD, PLUGIN_FULLSCREEN, PLUGIN_INLINE, PLUGIN_SHARE, PLUGIN_SLIDESHOW, PLUGIN_THUMBNAILS, PLUGIN_ZOOM, SLIDE_STATUS_PLAYING } from './types.js';\n\nconst LightboxDefaultProps = {\n    open: false,\n    close: () => { },\n    index: 0,\n    slides: [],\n    render: {},\n    plugins: [],\n    toolbar: { buttons: [ACTION_CLOSE] },\n    labels: {},\n    animation: {\n        fade: 250,\n        swipe: 500,\n        easing: {\n            fade: \"ease\",\n            swipe: \"ease-out\",\n            navigation: \"ease-in-out\",\n        },\n    },\n    carousel: {\n        finite: false,\n        preload: 2,\n        padding: \"16px\",\n        spacing: \"30%\",\n        imageFit: IMAGE_FIT_CONTAIN,\n        imageProps: {},\n    },\n    controller: {\n        ref: null,\n        focus: true,\n        aria: false,\n        touchAction: \"none\",\n        closeOnPullDown: false,\n        closeOnBackdropClick: false,\n    },\n    portal: {},\n    on: {},\n    styles: {},\n    className: \"\",\n};\n\nfunction createModule(name, component) {\n    return { name, component };\n}\nfunction createNode(module, children) {\n    return { module, children };\n}\nfunction traverseNode(node, target, apply) {\n    if (node.module.name === target) {\n        return apply(node);\n    }\n    if (node.children) {\n        return [\n            createNode(node.module, node.children.flatMap((n) => { var _a; return (_a = traverseNode(n, target, apply)) !== null && _a !== void 0 ? _a : []; })),\n        ];\n    }\n    return [node];\n}\nfunction traverse(nodes, target, apply) {\n    return nodes.flatMap((node) => { var _a; return (_a = traverseNode(node, target, apply)) !== null && _a !== void 0 ? _a : []; });\n}\nfunction withPlugins(root, plugins = [], augmentations = []) {\n    let config = root;\n    const contains = (target) => {\n        const nodes = [...config];\n        while (nodes.length > 0) {\n            const node = nodes.pop();\n            if ((node === null || node === void 0 ? void 0 : node.module.name) === target)\n                return true;\n            if (node === null || node === void 0 ? void 0 : node.children)\n                nodes.push(...node.children);\n        }\n        return false;\n    };\n    const addParent = (target, module) => {\n        if (target === \"\") {\n            config = [createNode(module, config)];\n            return;\n        }\n        config = traverse(config, target, (node) => [createNode(module, [node])]);\n    };\n    const append = (target, module) => {\n        config = traverse(config, target, (node) => [createNode(node.module, [createNode(module, node.children)])]);\n    };\n    const addChild = (target, module, precede) => {\n        config = traverse(config, target, (node) => {\n            var _a;\n            return [\n                createNode(node.module, [\n                    ...(precede ? [createNode(module)] : []),\n                    ...((_a = node.children) !== null && _a !== void 0 ? _a : []),\n                    ...(!precede ? [createNode(module)] : []),\n                ]),\n            ];\n        });\n    };\n    const addSibling = (target, module, precede) => {\n        config = traverse(config, target, (node) => [\n            ...(precede ? [createNode(module)] : []),\n            node,\n            ...(!precede ? [createNode(module)] : []),\n        ]);\n    };\n    const addModule = (module) => {\n        append(MODULE_CONTROLLER, module);\n    };\n    const replace = (target, module) => {\n        config = traverse(config, target, (node) => [createNode(module, node.children)]);\n    };\n    const remove = (target) => {\n        config = traverse(config, target, (node) => node.children);\n    };\n    const augment = (augmentation) => {\n        augmentations.push(augmentation);\n    };\n    plugins.forEach((plugin) => {\n        plugin({\n            contains,\n            addParent,\n            append,\n            addChild,\n            addSibling,\n            addModule,\n            replace,\n            remove,\n            augment,\n        });\n    });\n    return {\n        config,\n        augmentation: (props) => augmentations.reduce((acc, augmentation) => augmentation(acc), props),\n    };\n}\n\nconst clsx = (...classes) => [...classes].filter((cls) => Boolean(cls)).join(\" \");\nconst cssPrefix$3 = \"yarl__\";\nconst cssClass = (name) => `${cssPrefix$3}${name}`;\nconst cssVar = (name) => `--${cssPrefix$3}${name}`;\nconst composePrefix = (base, prefix) => `${base}${prefix ? `_${prefix}` : \"\"}`;\nconst makeComposePrefix = (base) => (prefix) => composePrefix(base, prefix);\nconst label = (labels, lbl) => (labels && labels[lbl] ? labels[lbl] : lbl);\nconst cleanup = (...cleaners) => () => {\n    cleaners.forEach((cleaner) => {\n        cleaner();\n    });\n};\nconst makeUseContext = (name, contextName, context) => () => {\n    const ctx = React.useContext(context);\n    if (!ctx) {\n        throw new Error(`${name} must be used within a ${contextName}.Provider`);\n    }\n    return ctx;\n};\nconst hasWindow = () => typeof window !== \"undefined\";\nfunction round(value, decimals = 0) {\n    const factor = 10 ** decimals;\n    return Math.round((value + Number.EPSILON) * factor) / factor;\n}\nconst isImageSlide = (slide) => slide.type === undefined || slide.type === \"image\";\nconst isImageFitCover = (image, imageFit) => image.imageFit === IMAGE_FIT_COVER || (image.imageFit !== IMAGE_FIT_CONTAIN && imageFit === IMAGE_FIT_COVER);\nfunction parseLengthPercentage(input) {\n    if (typeof input === \"number\") {\n        return { pixel: input };\n    }\n    if (typeof input === \"string\") {\n        const value = parseInt(input, 10);\n        return input.endsWith(\"%\") ? { percent: value } : { pixel: value };\n    }\n    return { pixel: 0 };\n}\nfunction computeSlideRect(containerRect, padding) {\n    const paddingValue = parseLengthPercentage(padding);\n    const paddingPixels = paddingValue.percent !== undefined ? (containerRect.width / 100) * paddingValue.percent : paddingValue.pixel;\n    return {\n        width: Math.max(containerRect.width - 2 * paddingPixels, 0),\n        height: Math.max(containerRect.height - 2 * paddingPixels, 0),\n    };\n}\nconst devicePixelRatio = () => (hasWindow() ? window === null || window === void 0 ? void 0 : window.devicePixelRatio : undefined) || 1;\nconst getSlideIndex = (index, slidesCount) => slidesCount > 0 ? ((index % slidesCount) + slidesCount) % slidesCount : 0;\nconst hasSlides = (slides) => slides.length > 0;\nconst getSlide = (slides, index) => slides[getSlideIndex(index, slides.length)];\nconst getSlideIfPresent = (slides, index) => hasSlides(slides) ? getSlide(slides, index) : undefined;\nfunction addToolbarButton(toolbar, key, button) {\n    if (!button)\n        return toolbar;\n    const { buttons, ...restToolbar } = toolbar;\n    const index = buttons.findIndex((item) => item === key);\n    const buttonWithKey = React.isValidElement(button) ? React.cloneElement(button, { key }, null) : button;\n    if (index >= 0) {\n        const result = [...buttons];\n        result.splice(index, 1, buttonWithKey);\n        return { buttons: result, ...restToolbar };\n    }\n    return { buttons: [buttonWithKey, ...buttons], ...restToolbar };\n}\nfunction stopNavigationEventsPropagation() {\n    const stopPropagation = (event) => {\n        event.stopPropagation();\n    };\n    return { onPointerDown: stopPropagation, onKeyDown: stopPropagation, onWheel: stopPropagation };\n}\n\nconst EventsContext = React.createContext(null);\nconst useEvents = makeUseContext(\"useEvents\", \"EventsContext\", EventsContext);\nfunction EventsProvider({ children }) {\n    const [subscriptions] = React.useState({});\n    React.useEffect(() => () => {\n        Object.keys(subscriptions).forEach((topic) => delete subscriptions[topic]);\n    }, [subscriptions]);\n    const context = React.useMemo(() => {\n        const unsubscribe = (topic, callback) => {\n            var _a;\n            (_a = subscriptions[topic]) === null || _a === void 0 ? void 0 : _a.splice(0, subscriptions[topic].length, ...subscriptions[topic].filter((cb) => cb !== callback));\n        };\n        const subscribe = (topic, callback) => {\n            if (!subscriptions[topic]) {\n                subscriptions[topic] = [];\n            }\n            subscriptions[topic].push(callback);\n            return () => unsubscribe(topic, callback);\n        };\n        const publish = (...[topic, event]) => {\n            var _a;\n            (_a = subscriptions[topic]) === null || _a === void 0 ? void 0 : _a.forEach((callback) => callback(event));\n        };\n        return { publish, subscribe, unsubscribe };\n    }, [subscriptions]);\n    return React.createElement(EventsContext.Provider, { value: context }, children);\n}\n\nconst LightboxPropsContext = React.createContext(null);\nconst useLightboxProps = makeUseContext(\"useLightboxProps\", \"LightboxPropsContext\", LightboxPropsContext);\nfunction LightboxPropsProvider({ children, ...props }) {\n    return React.createElement(LightboxPropsContext.Provider, { value: props }, children);\n}\n\nconst LightboxStateContext = React.createContext(null);\nconst useLightboxState = makeUseContext(\"useLightboxState\", \"LightboxStateContext\", LightboxStateContext);\nconst LightboxDispatchContext = React.createContext(null);\nconst useLightboxDispatch = makeUseContext(\"useLightboxDispatch\", \"LightboxDispatchContext\", LightboxDispatchContext);\nfunction reducer(state, action) {\n    switch (action.type) {\n        case \"swipe\": {\n            const { slides } = state;\n            const increment = (action === null || action === void 0 ? void 0 : action.increment) || 0;\n            const globalIndex = state.globalIndex + increment;\n            const currentIndex = getSlideIndex(globalIndex, slides.length);\n            const currentSlide = getSlideIfPresent(slides, currentIndex);\n            const animation = increment || action.duration\n                ? {\n                    increment,\n                    duration: action.duration,\n                    easing: action.easing,\n                }\n                : undefined;\n            return { slides, currentIndex, globalIndex, currentSlide, animation };\n        }\n        case \"update\":\n            return {\n                slides: action.slides,\n                currentIndex: action.index,\n                globalIndex: action.index,\n                currentSlide: getSlideIfPresent(action.slides, action.index),\n            };\n        default:\n            throw new Error(UNKNOWN_ACTION_TYPE);\n    }\n}\nfunction LightboxStateProvider({ slides, index, children }) {\n    const [state, dispatch] = React.useReducer(reducer, {\n        slides,\n        currentIndex: index,\n        globalIndex: index,\n        currentSlide: getSlideIfPresent(slides, index),\n    });\n    React.useEffect(() => {\n        dispatch({ type: \"update\", slides, index });\n    }, [slides, index]);\n    const context = React.useMemo(() => ({ ...state, state, dispatch }), [state, dispatch]);\n    return (React.createElement(LightboxDispatchContext.Provider, { value: dispatch },\n        React.createElement(LightboxStateContext.Provider, { value: context }, children)));\n}\n\nconst TimeoutsContext = React.createContext(null);\nconst useTimeouts = makeUseContext(\"useTimeouts\", \"TimeoutsContext\", TimeoutsContext);\nfunction TimeoutsProvider({ children }) {\n    const [timeouts] = React.useState([]);\n    React.useEffect(() => () => {\n        timeouts.forEach((tid) => window.clearTimeout(tid));\n        timeouts.splice(0, timeouts.length);\n    }, [timeouts]);\n    const context = React.useMemo(() => {\n        const removeTimeout = (id) => {\n            timeouts.splice(0, timeouts.length, ...timeouts.filter((tid) => tid !== id));\n        };\n        const setTimeout = (fn, delay) => {\n            const id = window.setTimeout(() => {\n                removeTimeout(id);\n                fn();\n            }, delay);\n            timeouts.push(id);\n            return id;\n        };\n        const clearTimeout = (id) => {\n            if (id !== undefined) {\n                removeTimeout(id);\n                window.clearTimeout(id);\n            }\n        };\n        return { setTimeout, clearTimeout };\n    }, [timeouts]);\n    return React.createElement(TimeoutsContext.Provider, { value: context }, children);\n}\n\nconst IconButton = React.forwardRef(function IconButton({ label: label$1, className, icon: Icon, renderIcon, onClick, style, ...rest }, ref) {\n    const { styles, labels } = useLightboxProps();\n    return (React.createElement(\"button\", { ref: ref, type: \"button\", \"aria-label\": label(labels, label$1), className: clsx(cssClass(ELEMENT_BUTTON), className), onClick: onClick, style: { ...style, ...styles.button }, ...rest }, renderIcon ? renderIcon() : React.createElement(Icon, { className: cssClass(ELEMENT_ICON), style: styles.icon })));\n});\n\nfunction svgIcon(name, children) {\n    const icon = (props) => (React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", width: \"24\", height: \"24\", \"aria-hidden\": \"true\", focusable: \"false\", ...props }, children));\n    icon.displayName = name;\n    return icon;\n}\nfunction createIcon(name, glyph) {\n    return svgIcon(name, React.createElement(\"g\", { fill: \"currentColor\" },\n        React.createElement(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }),\n        glyph));\n}\nfunction createIconDisabled(name, glyph) {\n    return svgIcon(name, React.createElement(React.Fragment, null,\n        React.createElement(\"defs\", null,\n            React.createElement(\"mask\", { id: \"strike\" },\n                React.createElement(\"path\", { d: \"M0 0h24v24H0z\", fill: \"white\" }),\n                React.createElement(\"path\", { d: \"M0 0L24 24\", stroke: \"black\", strokeWidth: 4 }))),\n        React.createElement(\"path\", { d: \"M0.70707 2.121320L21.878680 23.292883\", stroke: \"currentColor\", strokeWidth: 2 }),\n        React.createElement(\"g\", { fill: \"currentColor\", mask: \"url(#strike)\" },\n            React.createElement(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }),\n            glyph)));\n}\nconst CloseIcon = createIcon(\"Close\", React.createElement(\"path\", { d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\" }));\nconst PreviousIcon = createIcon(\"Previous\", React.createElement(\"path\", { d: \"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\" }));\nconst NextIcon = createIcon(\"Next\", React.createElement(\"path\", { d: \"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\" }));\nconst LoadingIcon = createIcon(\"Loading\", React.createElement(React.Fragment, null, Array.from({ length: 8 }).map((_, index, array) => (React.createElement(\"line\", { key: index, x1: \"12\", y1: \"6.5\", x2: \"12\", y2: \"1.8\", strokeLinecap: \"round\", strokeWidth: \"2.6\", stroke: \"currentColor\", strokeOpacity: (1 / array.length) * (index + 1), transform: `rotate(${(360 / array.length) * index}, 12, 12)` })))));\nconst ErrorIcon = createIcon(\"Error\", React.createElement(\"path\", { d: \"M21.9,21.9l-8.49-8.49l0,0L3.59,3.59l0,0L2.1,2.1L0.69,3.51L3,5.83V19c0,1.1,0.9,2,2,2h13.17l2.31,2.31L21.9,21.9z M5,18 l3.5-4.5l2.5,3.01L12.17,15l3,3H5z M21,18.17L5.83,3H19c1.1,0,2,0.9,2,2V18.17z\" }));\n\nconst useLayoutEffect = hasWindow() ? React.useLayoutEffect : React.useEffect;\n\nfunction useMotionPreference() {\n    const [reduceMotion, setReduceMotion] = React.useState(false);\n    React.useEffect(() => {\n        var _a, _b;\n        const mediaQuery = (_a = window.matchMedia) === null || _a === void 0 ? void 0 : _a.call(window, \"(prefers-reduced-motion: reduce)\");\n        setReduceMotion(mediaQuery === null || mediaQuery === void 0 ? void 0 : mediaQuery.matches);\n        const listener = (event) => setReduceMotion(event.matches);\n        (_b = mediaQuery === null || mediaQuery === void 0 ? void 0 : mediaQuery.addEventListener) === null || _b === void 0 ? void 0 : _b.call(mediaQuery, \"change\", listener);\n        return () => { var _a; return (_a = mediaQuery === null || mediaQuery === void 0 ? void 0 : mediaQuery.removeEventListener) === null || _a === void 0 ? void 0 : _a.call(mediaQuery, \"change\", listener); };\n    }, []);\n    return reduceMotion;\n}\n\nfunction currentTransformation(node) {\n    let x = 0;\n    let y = 0;\n    let z = 0;\n    const matrix = window.getComputedStyle(node).transform;\n    const matcher = matrix.match(/matrix.*\\((.+)\\)/);\n    if (matcher) {\n        const values = matcher[1].split(\",\").map((str) => Number.parseInt(str, 10));\n        if (values.length === 6) {\n            x = values[4];\n            y = values[5];\n        }\n        else if (values.length === 16) {\n            x = values[12];\n            y = values[13];\n            z = values[14];\n        }\n    }\n    return { x, y, z };\n}\nfunction useAnimation(nodeRef, computeAnimation) {\n    const snapshot = React.useRef();\n    const animation = React.useRef();\n    const reduceMotion = useMotionPreference();\n    useLayoutEffect(() => {\n        var _a, _b, _c;\n        if (nodeRef.current && snapshot.current !== undefined && !reduceMotion) {\n            const { keyframes, duration, easing, onfinish } = computeAnimation(snapshot.current, nodeRef.current.getBoundingClientRect(), currentTransformation(nodeRef.current)) || {};\n            if (keyframes && duration) {\n                (_a = animation.current) === null || _a === void 0 ? void 0 : _a.cancel();\n                animation.current = undefined;\n                try {\n                    animation.current = (_c = (_b = nodeRef.current).animate) === null || _c === void 0 ? void 0 : _c.call(_b, keyframes, { duration, easing });\n                }\n                catch (err) {\n                    console.error(err);\n                }\n                if (animation.current) {\n                    animation.current.onfinish = () => {\n                        animation.current = undefined;\n                        onfinish === null || onfinish === void 0 ? void 0 : onfinish();\n                    };\n                }\n            }\n        }\n        snapshot.current = undefined;\n    });\n    return {\n        prepareAnimation: (currentSnapshot) => {\n            snapshot.current = currentSnapshot;\n        },\n        isAnimationPlaying: () => { var _a; return ((_a = animation.current) === null || _a === void 0 ? void 0 : _a.playState) === \"running\"; },\n    };\n}\n\nfunction useContainerRect() {\n    const [containerRect, setContainerRect] = React.useState();\n    const containerRef = React.useRef(null);\n    const observerRef = React.useRef();\n    const setContainerRef = React.useCallback((node) => {\n        containerRef.current = node;\n        if (observerRef.current) {\n            observerRef.current.disconnect();\n            observerRef.current = undefined;\n        }\n        const updateContainerRect = () => {\n            if (node) {\n                const styles = window.getComputedStyle(node);\n                const parse = (value) => parseFloat(value) || 0;\n                setContainerRect({\n                    width: Math.round(node.clientWidth - parse(styles.paddingLeft) - parse(styles.paddingRight)),\n                    height: Math.round(node.clientHeight - parse(styles.paddingTop) - parse(styles.paddingBottom)),\n                });\n            }\n            else {\n                setContainerRect(undefined);\n            }\n        };\n        updateContainerRect();\n        if (node && typeof ResizeObserver !== \"undefined\") {\n            observerRef.current = new ResizeObserver(updateContainerRect);\n            observerRef.current.observe(node);\n        }\n    }, []);\n    return React.useMemo(() => ({\n        setContainerRef,\n        containerRef,\n        containerRect,\n    }), [setContainerRef, containerRef, containerRect]);\n}\n\nfunction useDelay() {\n    const timeoutId = React.useRef();\n    const { setTimeout, clearTimeout } = useTimeouts();\n    return React.useCallback((callback, delay) => {\n        clearTimeout(timeoutId.current);\n        timeoutId.current = setTimeout(callback, delay > 0 ? delay : 0);\n    }, [setTimeout, clearTimeout]);\n}\n\nfunction useEventCallback(fn) {\n    const ref = React.useRef(fn);\n    useLayoutEffect(() => {\n        ref.current = fn;\n    });\n    return React.useCallback((...args) => { var _a; return (_a = ref.current) === null || _a === void 0 ? void 0 : _a.call(ref, ...args); }, []);\n}\n\nfunction setRef(ref, value) {\n    if (typeof ref === \"function\") {\n        ref(value);\n    }\n    else if (ref) {\n        ref.current = value;\n    }\n}\nfunction useForkRef(refA, refB) {\n    return React.useMemo(() => refA == null && refB == null\n        ? null\n        : (refValue) => {\n            setRef(refA, refValue);\n            setRef(refB, refValue);\n        }, [refA, refB]);\n}\n\nfunction useLoseFocus(focus, disabled = false) {\n    const focused = React.useRef();\n    useLayoutEffect(() => {\n        if (disabled && focused.current) {\n            focused.current = false;\n            focus();\n        }\n    }, [disabled, focus]);\n    const onFocus = React.useCallback(() => {\n        focused.current = true;\n    }, []);\n    const onBlur = React.useCallback(() => {\n        focused.current = false;\n    }, []);\n    return { onFocus, onBlur };\n}\n\nfunction useRTL() {\n    const [isRTL, setIsRTL] = React.useState(false);\n    useLayoutEffect(() => {\n        setIsRTL(window.getComputedStyle(window.document.documentElement).direction === \"rtl\");\n    }, []);\n    return isRTL;\n}\n\nfunction useSensors() {\n    const [subscribers] = React.useState({});\n    return React.useMemo(() => {\n        const notifySubscribers = (type, event) => {\n            var _a;\n            (_a = subscribers[type]) === null || _a === void 0 ? void 0 : _a.forEach((listener) => {\n                if (!event.isPropagationStopped())\n                    listener(event);\n            });\n        };\n        return {\n            registerSensors: {\n                onPointerDown: (event) => notifySubscribers(EVENT_ON_POINTER_DOWN, event),\n                onPointerMove: (event) => notifySubscribers(EVENT_ON_POINTER_MOVE, event),\n                onPointerUp: (event) => notifySubscribers(EVENT_ON_POINTER_UP, event),\n                onPointerLeave: (event) => notifySubscribers(EVENT_ON_POINTER_LEAVE, event),\n                onPointerCancel: (event) => notifySubscribers(EVENT_ON_POINTER_CANCEL, event),\n                onKeyDown: (event) => notifySubscribers(EVENT_ON_KEY_DOWN, event),\n                onKeyUp: (event) => notifySubscribers(EVENT_ON_KEY_UP, event),\n                onWheel: (event) => notifySubscribers(EVENT_ON_WHEEL, event),\n            },\n            subscribeSensors: (type, callback) => {\n                if (!subscribers[type]) {\n                    subscribers[type] = [];\n                }\n                subscribers[type].unshift(callback);\n                return () => {\n                    const listeners = subscribers[type];\n                    if (listeners) {\n                        listeners.splice(0, listeners.length, ...listeners.filter((el) => el !== callback));\n                    }\n                };\n            },\n        };\n    }, [subscribers]);\n}\n\nfunction useThrottle(callback, delay) {\n    const lastCallbackTime = React.useRef(0);\n    const delayCallback = useDelay();\n    const executeCallback = useEventCallback((...args) => {\n        lastCallbackTime.current = Date.now();\n        callback(args);\n    });\n    return React.useCallback((...args) => {\n        delayCallback(() => {\n            executeCallback(args);\n        }, delay - (Date.now() - lastCallbackTime.current));\n    }, [delay, executeCallback, delayCallback]);\n}\n\nconst slidePrefix = makeComposePrefix(\"slide\");\nconst slideImagePrefix = makeComposePrefix(\"slide_image\");\nfunction ImageSlide({ slide: image, offset, render, rect, imageFit, imageProps, onClick, onLoad, style, }) {\n    var _a, _b, _c, _d, _e, _f, _g;\n    const [status, setStatus] = React.useState(SLIDE_STATUS_LOADING);\n    const { publish } = useEvents();\n    const { setTimeout } = useTimeouts();\n    const imageRef = React.useRef(null);\n    React.useEffect(() => {\n        if (offset === 0) {\n            publish(activeSlideStatus(status));\n        }\n    }, [offset, status, publish]);\n    const handleLoading = useEventCallback((img) => {\n        (\"decode\" in img ? img.decode() : Promise.resolve())\n            .catch(() => { })\n            .then(() => {\n            if (!img.parentNode) {\n                return;\n            }\n            setStatus(SLIDE_STATUS_COMPLETE);\n            setTimeout(() => {\n                onLoad === null || onLoad === void 0 ? void 0 : onLoad(img);\n            }, 0);\n        });\n    });\n    const setImageRef = React.useCallback((img) => {\n        imageRef.current = img;\n        if (img === null || img === void 0 ? void 0 : img.complete) {\n            handleLoading(img);\n        }\n    }, [handleLoading]);\n    const handleOnLoad = React.useCallback((event) => {\n        handleLoading(event.currentTarget);\n    }, [handleLoading]);\n    const onError = React.useCallback(() => {\n        setStatus(SLIDE_STATUS_ERROR);\n    }, []);\n    const cover = isImageFitCover(image, imageFit);\n    const nonInfinite = (value, fallback) => (Number.isFinite(value) ? value : fallback);\n    const maxWidth = nonInfinite(Math.max(...((_b = (_a = image.srcSet) === null || _a === void 0 ? void 0 : _a.map((x) => x.width)) !== null && _b !== void 0 ? _b : []).concat(image.width ? [image.width] : [])), ((_c = imageRef.current) === null || _c === void 0 ? void 0 : _c.naturalWidth) || 0);\n    const maxHeight = nonInfinite(Math.max(...((_e = (_d = image.srcSet) === null || _d === void 0 ? void 0 : _d.map((x) => x.height)) !== null && _e !== void 0 ? _e : []).concat(image.height ? [image.height] : [])), ((_f = imageRef.current) === null || _f === void 0 ? void 0 : _f.naturalHeight) || 0);\n    const defaultStyle = maxWidth && maxHeight\n        ? {\n            maxWidth: `min(${maxWidth}px, 100%)`,\n            maxHeight: `min(${maxHeight}px, 100%)`,\n        }\n        : {\n            maxWidth: \"100%\",\n            maxHeight: \"100%\",\n        };\n    const srcSet = (_g = image.srcSet) === null || _g === void 0 ? void 0 : _g.sort((a, b) => a.width - b.width).map((item) => `${item.src} ${item.width}w`).join(\", \");\n    const estimateActualWidth = () => rect && !cover && image.width && image.height ? (rect.height / image.height) * image.width : Number.MAX_VALUE;\n    const sizes = srcSet && rect && hasWindow() ? `${Math.round(Math.min(estimateActualWidth(), rect.width))}px` : undefined;\n    const { style: imagePropsStyle, className: imagePropsClassName, ...restImageProps } = imageProps || {};\n    return (React.createElement(React.Fragment, null,\n        React.createElement(\"img\", { ref: setImageRef, onLoad: handleOnLoad, onError: onError, onClick: onClick, draggable: false, className: clsx(cssClass(slideImagePrefix()), cover && cssClass(slideImagePrefix(\"cover\")), status !== SLIDE_STATUS_COMPLETE && cssClass(slideImagePrefix(\"loading\")), imagePropsClassName), style: { ...defaultStyle, ...style, ...imagePropsStyle }, ...restImageProps, alt: image.alt, sizes: sizes, srcSet: srcSet, src: image.src }),\n        status !== SLIDE_STATUS_COMPLETE && (React.createElement(\"div\", { className: cssClass(slidePrefix(SLIDE_STATUS_PLACEHOLDER)) },\n            status === SLIDE_STATUS_LOADING &&\n                ((render === null || render === void 0 ? void 0 : render.iconLoading) ? (render.iconLoading()) : (React.createElement(LoadingIcon, { className: clsx(cssClass(ELEMENT_ICON), cssClass(slidePrefix(SLIDE_STATUS_LOADING))) }))),\n            status === SLIDE_STATUS_ERROR &&\n                ((render === null || render === void 0 ? void 0 : render.iconError) ? (render.iconError()) : (React.createElement(ErrorIcon, { className: clsx(cssClass(ELEMENT_ICON), cssClass(slidePrefix(SLIDE_STATUS_ERROR))) })))))));\n}\n\nvar SwipeState;\n(function (SwipeState) {\n    SwipeState[SwipeState[\"NONE\"] = 0] = \"NONE\";\n    SwipeState[SwipeState[\"SWIPE\"] = 1] = \"SWIPE\";\n    SwipeState[SwipeState[\"PULL_DOWN\"] = 2] = \"PULL_DOWN\";\n    SwipeState[SwipeState[\"ANIMATION\"] = 3] = \"ANIMATION\";\n})(SwipeState || (SwipeState = {}));\n\nfunction usePointerEvents(subscribeSensors, onPointerDown, onPointerMove, onPointerUp, disabled) {\n    React.useEffect(() => {\n        if (disabled)\n            return () => { };\n        return cleanup(subscribeSensors(EVENT_ON_POINTER_DOWN, onPointerDown), subscribeSensors(EVENT_ON_POINTER_MOVE, onPointerMove), subscribeSensors(EVENT_ON_POINTER_UP, onPointerUp), subscribeSensors(EVENT_ON_POINTER_LEAVE, onPointerUp), subscribeSensors(EVENT_ON_POINTER_CANCEL, onPointerUp));\n    }, [subscribeSensors, onPointerDown, onPointerMove, onPointerUp, disabled]);\n}\n\nvar Gesture;\n(function (Gesture) {\n    Gesture[Gesture[\"NONE\"] = 0] = \"NONE\";\n    Gesture[Gesture[\"SWIPE\"] = 1] = \"SWIPE\";\n    Gesture[Gesture[\"PULL_DOWN\"] = 2] = \"PULL_DOWN\";\n})(Gesture || (Gesture = {}));\nconst SWIPE_THRESHOLD = 30;\nfunction usePointerSwipe(subscribeSensors, isSwipeValid, containerWidth, swipeAnimationDuration, onSwipeStart, onSwipeProgress, onSwipeFinish, onSwipeCancel, pullDownEnabled, onPullDownStart, onPullDownProgress, onPullDownFinish, onPullDownCancel) {\n    const offset = React.useRef(0);\n    const pointers = React.useRef([]);\n    const activePointer = React.useRef();\n    const startTime = React.useRef(0);\n    const gesture = React.useRef(Gesture.NONE);\n    const clearPointer = React.useCallback((event) => {\n        if (activePointer.current === event.pointerId) {\n            activePointer.current = undefined;\n            gesture.current = Gesture.NONE;\n        }\n        const currentPointers = pointers.current;\n        currentPointers.splice(0, currentPointers.length, ...currentPointers.filter((p) => p.pointerId !== event.pointerId));\n    }, []);\n    const addPointer = React.useCallback((event) => {\n        clearPointer(event);\n        event.persist();\n        pointers.current.push(event);\n    }, [clearPointer]);\n    const onPointerDown = useEventCallback((event) => {\n        addPointer(event);\n    });\n    const onPointerUp = useEventCallback((event) => {\n        if (pointers.current.find((x) => x.pointerId === event.pointerId) &&\n            activePointer.current === event.pointerId) {\n            const duration = Date.now() - startTime.current;\n            const currentOffset = offset.current;\n            if (gesture.current === Gesture.SWIPE) {\n                if (Math.abs(currentOffset) > 0.3 * containerWidth ||\n                    (Math.abs(currentOffset) > 5 && duration < swipeAnimationDuration)) {\n                    onSwipeFinish(currentOffset, duration);\n                }\n                else {\n                    onSwipeCancel(currentOffset);\n                }\n            }\n            else if (gesture.current === Gesture.PULL_DOWN) {\n                if (currentOffset > 2 * SWIPE_THRESHOLD) {\n                    onPullDownFinish(currentOffset, duration);\n                }\n                else {\n                    onPullDownCancel(currentOffset);\n                }\n            }\n            offset.current = 0;\n            gesture.current = Gesture.NONE;\n        }\n        clearPointer(event);\n    });\n    const onPointerMove = useEventCallback((event) => {\n        const pointer = pointers.current.find((p) => p.pointerId === event.pointerId);\n        if (pointer) {\n            const isCurrentPointer = activePointer.current === event.pointerId;\n            if (event.buttons === 0) {\n                if (isCurrentPointer && offset.current !== 0) {\n                    onPointerUp(event);\n                }\n                else {\n                    clearPointer(pointer);\n                }\n                return;\n            }\n            const deltaX = event.clientX - pointer.clientX;\n            const deltaY = event.clientY - pointer.clientY;\n            if (activePointer.current === undefined) {\n                const startGesture = (newGesture) => {\n                    addPointer(event);\n                    activePointer.current = event.pointerId;\n                    startTime.current = Date.now();\n                    gesture.current = newGesture;\n                };\n                if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > SWIPE_THRESHOLD && isSwipeValid(deltaX)) {\n                    startGesture(Gesture.SWIPE);\n                    onSwipeStart();\n                }\n                else if (pullDownEnabled && Math.abs(deltaY) > Math.abs(deltaX) && deltaY > SWIPE_THRESHOLD) {\n                    startGesture(Gesture.PULL_DOWN);\n                    onPullDownStart();\n                }\n            }\n            else if (isCurrentPointer) {\n                if (gesture.current === Gesture.SWIPE) {\n                    offset.current = deltaX;\n                    onSwipeProgress(deltaX);\n                }\n                else if (gesture.current === Gesture.PULL_DOWN) {\n                    offset.current = deltaY;\n                    onPullDownProgress(deltaY);\n                }\n            }\n        }\n    });\n    usePointerEvents(subscribeSensors, onPointerDown, onPointerMove, onPointerUp);\n}\n\nconst WHEEL = \"wheel\";\nfunction preventDefault(event) {\n    if (Math.abs(event.deltaX) > Math.abs(event.deltaY) || event.ctrlKey) {\n        event.preventDefault();\n    }\n}\nfunction usePreventSwipeNavigation() {\n    const ref = React.useRef(null);\n    return React.useCallback((node) => {\n        var _a;\n        if (node) {\n            node.addEventListener(WHEEL, preventDefault, { passive: false });\n        }\n        else {\n            (_a = ref.current) === null || _a === void 0 ? void 0 : _a.removeEventListener(WHEEL, preventDefault);\n        }\n        ref.current = node;\n    }, []);\n}\n\nfunction useWheelSwipe(swipeState, subscribeSensors, isSwipeValid, containerWidth, swipeAnimationDuration, onSwipeStart, onSwipeProgress, onSwipeFinish, onSwipeCancel) {\n    const offset = React.useRef(0);\n    const intent = React.useRef(0);\n    const intentCleanup = React.useRef();\n    const resetCleanup = React.useRef();\n    const wheelResidualMomentum = React.useRef(0);\n    const startTime = React.useRef(0);\n    const { setTimeout, clearTimeout } = useTimeouts();\n    const cancelSwipeIntentCleanup = React.useCallback(() => {\n        if (intentCleanup.current) {\n            clearTimeout(intentCleanup.current);\n            intentCleanup.current = undefined;\n        }\n    }, [clearTimeout]);\n    const cancelSwipeResetCleanup = React.useCallback(() => {\n        if (resetCleanup.current) {\n            clearTimeout(resetCleanup.current);\n            resetCleanup.current = undefined;\n        }\n    }, [clearTimeout]);\n    const handleCleanup = useEventCallback(() => {\n        if (swipeState !== SwipeState.SWIPE) {\n            offset.current = 0;\n            startTime.current = 0;\n            cancelSwipeIntentCleanup();\n            cancelSwipeResetCleanup();\n        }\n    });\n    React.useEffect(handleCleanup, [swipeState, handleCleanup]);\n    const handleCancelSwipe = useEventCallback((currentSwipeOffset) => {\n        resetCleanup.current = undefined;\n        if (offset.current === currentSwipeOffset) {\n            onSwipeCancel(offset.current);\n        }\n    });\n    const onWheel = useEventCallback((event) => {\n        if (event.ctrlKey) {\n            return;\n        }\n        if (Math.abs(event.deltaY) > Math.abs(event.deltaX)) {\n            return;\n        }\n        if (swipeState === SwipeState.NONE) {\n            if (Math.abs(event.deltaX) <= 1.2 * Math.abs(wheelResidualMomentum.current)) {\n                wheelResidualMomentum.current = event.deltaX;\n                return;\n            }\n            if (!isSwipeValid(-event.deltaX)) {\n                return;\n            }\n            intent.current += event.deltaX;\n            cancelSwipeIntentCleanup();\n            if (Math.abs(intent.current) > 30) {\n                intent.current = 0;\n                wheelResidualMomentum.current = 0;\n                startTime.current = Date.now();\n                onSwipeStart();\n            }\n            else {\n                const currentSwipeIntent = intent.current;\n                intentCleanup.current = setTimeout(() => {\n                    intentCleanup.current = undefined;\n                    if (currentSwipeIntent === intent.current) {\n                        intent.current = 0;\n                    }\n                }, swipeAnimationDuration);\n            }\n        }\n        else if (swipeState === SwipeState.SWIPE) {\n            let newSwipeOffset = offset.current - event.deltaX;\n            newSwipeOffset = Math.min(Math.abs(newSwipeOffset), containerWidth) * Math.sign(newSwipeOffset);\n            offset.current = newSwipeOffset;\n            onSwipeProgress(newSwipeOffset);\n            cancelSwipeResetCleanup();\n            if (Math.abs(newSwipeOffset) > 0.2 * containerWidth) {\n                wheelResidualMomentum.current = event.deltaX;\n                onSwipeFinish(newSwipeOffset, Date.now() - startTime.current);\n                return;\n            }\n            resetCleanup.current = setTimeout(() => handleCancelSwipe(newSwipeOffset), 2 * swipeAnimationDuration);\n        }\n        else {\n            wheelResidualMomentum.current = event.deltaX;\n        }\n    });\n    React.useEffect(() => subscribeSensors(EVENT_ON_WHEEL, onWheel), [subscribeSensors, onWheel]);\n}\n\nconst cssContainerPrefix = makeComposePrefix(\"container\");\nconst ControllerContext = React.createContext(null);\nconst useController = makeUseContext(\"useController\", \"ControllerContext\", ControllerContext);\nfunction Controller({ children, ...props }) {\n    var _a;\n    const { carousel, animation, controller, on, styles, render } = props;\n    const [toolbarWidth, setToolbarWidth] = React.useState();\n    const state = useLightboxState();\n    const dispatch = useLightboxDispatch();\n    const [swipeState, setSwipeState] = React.useState(SwipeState.NONE);\n    const swipeOffset = React.useRef(0);\n    const pullDownOffset = React.useRef(0);\n    const pullDownOpacity = React.useRef(1);\n    const { registerSensors, subscribeSensors } = useSensors();\n    const { subscribe, publish } = useEvents();\n    const cleanupAnimationIncrement = useDelay();\n    const cleanupSwipeOffset = useDelay();\n    const cleanupPullDownOffset = useDelay();\n    const { containerRef, setContainerRef, containerRect } = useContainerRect();\n    const handleContainerRef = useForkRef(usePreventSwipeNavigation(), setContainerRef);\n    const carouselRef = React.useRef(null);\n    const setCarouselRef = useForkRef(carouselRef, undefined);\n    const isRTL = useRTL();\n    const rtl = (value) => (isRTL ? -1 : 1) * (typeof value === \"number\" ? value : 1);\n    const focus = useEventCallback(() => { var _a; return (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.focus(); });\n    const getLightboxProps = useEventCallback(() => props);\n    const getLightboxState = useEventCallback(() => state);\n    const prev = React.useCallback((params) => publish(ACTION_PREV, params), [publish]);\n    const next = React.useCallback((params) => publish(ACTION_NEXT, params), [publish]);\n    const close = React.useCallback(() => publish(ACTION_CLOSE), [publish]);\n    const isSwipeValid = (offset) => !(carousel.finite &&\n        ((rtl(offset) > 0 && state.currentIndex === 0) ||\n            (rtl(offset) < 0 && state.currentIndex === state.slides.length - 1)));\n    const setSwipeOffset = (offset) => {\n        var _a;\n        swipeOffset.current = offset;\n        (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.style.setProperty(cssVar(\"swipe_offset\"), `${Math.round(offset)}px`);\n    };\n    const pullDownEnabled = controller.closeOnPullDown;\n    const setPullDownOffset = (offset) => {\n        var _a, _b;\n        pullDownOffset.current = offset;\n        pullDownOpacity.current = (() => {\n            const threshold = 60;\n            const minOpacity = 0.5;\n            return Math.min(Math.max(round(1 - (offset / threshold) * (1 - minOpacity), 2), minOpacity), 1);\n        })();\n        (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.style.setProperty(cssVar(\"pull_down_offset\"), `${Math.round(offset)}px`);\n        (_b = containerRef.current) === null || _b === void 0 ? void 0 : _b.style.setProperty(cssVar(\"pull_down_opacity\"), `${pullDownOpacity.current}`);\n    };\n    const { prepareAnimation: preparePullDownAnimation } = useAnimation(carouselRef, (snapshot, rect, translate) => {\n        if (carouselRef.current && containerRect) {\n            return {\n                keyframes: [\n                    {\n                        transform: `translate(0, ${snapshot.rect.y - rect.y + translate.y}px)`,\n                        opacity: snapshot.opacity,\n                    },\n                    { transform: \"translate(0, 0)\", opacity: 1 },\n                ],\n                duration: snapshot.duration,\n                easing: animation.easing.fade,\n            };\n        }\n        return undefined;\n    });\n    const pullDown = (offset, cancel) => {\n        if (pullDownEnabled) {\n            setPullDownOffset(offset);\n            let duration = 0;\n            if (carouselRef.current) {\n                duration = animation.fade * (cancel ? 2 : 1);\n                preparePullDownAnimation({\n                    rect: carouselRef.current.getBoundingClientRect(),\n                    opacity: pullDownOpacity.current,\n                    duration,\n                });\n            }\n            cleanupPullDownOffset(() => {\n                setPullDownOffset(0);\n                setSwipeState(SwipeState.NONE);\n            }, duration);\n            setSwipeState(SwipeState.ANIMATION);\n            if (!cancel) {\n                close();\n            }\n        }\n    };\n    const { prepareAnimation, isAnimationPlaying } = useAnimation(carouselRef, (snapshot, rect, translate) => {\n        var _a;\n        if (carouselRef.current && containerRect && ((_a = state.animation) === null || _a === void 0 ? void 0 : _a.duration)) {\n            const parsedSpacing = parseLengthPercentage(carousel.spacing);\n            const spacingValue = (parsedSpacing.percent\n                ? (parsedSpacing.percent * containerRect.width) / 100\n                : parsedSpacing.pixel) || 0;\n            return {\n                keyframes: [\n                    {\n                        transform: `translate(${rtl(state.globalIndex - snapshot.index) * (containerRect.width + spacingValue) +\n                            snapshot.rect.x -\n                            rect.x +\n                            translate.x}px, 0)`,\n                    },\n                    { transform: \"translate(0, 0)\" },\n                ],\n                duration: state.animation.duration,\n                easing: state.animation.easing,\n            };\n        }\n        return undefined;\n    });\n    const swipe = useEventCallback((action) => {\n        var _a, _b;\n        const currentSwipeOffset = action.offset || 0;\n        const swipeDuration = !currentSwipeOffset ? (_a = animation.navigation) !== null && _a !== void 0 ? _a : animation.swipe : animation.swipe;\n        const swipeEasing = !currentSwipeOffset && !isAnimationPlaying() ? animation.easing.navigation : animation.easing.swipe;\n        let { direction } = action;\n        const count = (_b = action.count) !== null && _b !== void 0 ? _b : 1;\n        let newSwipeState = SwipeState.ANIMATION;\n        let newSwipeAnimationDuration = swipeDuration * count;\n        if (!direction) {\n            const containerWidth = containerRect === null || containerRect === void 0 ? void 0 : containerRect.width;\n            const elapsedTime = action.duration || 0;\n            const expectedTime = containerWidth\n                ? (swipeDuration / containerWidth) * Math.abs(currentSwipeOffset)\n                : swipeDuration;\n            if (count !== 0) {\n                if (elapsedTime < expectedTime) {\n                    newSwipeAnimationDuration =\n                        (newSwipeAnimationDuration / expectedTime) * Math.max(elapsedTime, expectedTime / 5);\n                }\n                else if (containerWidth) {\n                    newSwipeAnimationDuration =\n                        (swipeDuration / containerWidth) * (containerWidth - Math.abs(currentSwipeOffset));\n                }\n                direction = rtl(currentSwipeOffset) > 0 ? ACTION_PREV : ACTION_NEXT;\n            }\n            else {\n                newSwipeAnimationDuration = swipeDuration / 2;\n            }\n        }\n        let increment = 0;\n        if (direction === ACTION_PREV) {\n            if (isSwipeValid(rtl(1))) {\n                increment = -count;\n            }\n            else {\n                newSwipeState = SwipeState.NONE;\n                newSwipeAnimationDuration = swipeDuration;\n            }\n        }\n        else if (direction === ACTION_NEXT) {\n            if (isSwipeValid(rtl(-1))) {\n                increment = count;\n            }\n            else {\n                newSwipeState = SwipeState.NONE;\n                newSwipeAnimationDuration = swipeDuration;\n            }\n        }\n        newSwipeAnimationDuration = Math.round(newSwipeAnimationDuration);\n        cleanupSwipeOffset(() => {\n            setSwipeOffset(0);\n            setSwipeState(SwipeState.NONE);\n        }, newSwipeAnimationDuration);\n        if (carouselRef.current) {\n            prepareAnimation({\n                rect: carouselRef.current.getBoundingClientRect(),\n                index: state.globalIndex,\n            });\n        }\n        setSwipeState(newSwipeState);\n        publish(ACTION_SWIPE, {\n            type: \"swipe\",\n            increment,\n            duration: newSwipeAnimationDuration,\n            easing: swipeEasing,\n        });\n    });\n    React.useEffect(() => {\n        var _a, _b;\n        if (((_a = state.animation) === null || _a === void 0 ? void 0 : _a.increment) && ((_b = state.animation) === null || _b === void 0 ? void 0 : _b.duration)) {\n            cleanupAnimationIncrement(() => dispatch({ type: \"swipe\", increment: 0 }), state.animation.duration);\n        }\n    }, [state.animation, dispatch, cleanupAnimationIncrement]);\n    const swipeParams = [\n        subscribeSensors,\n        isSwipeValid,\n        (containerRect === null || containerRect === void 0 ? void 0 : containerRect.width) || 0,\n        animation.swipe,\n        () => setSwipeState(SwipeState.SWIPE),\n        (offset) => setSwipeOffset(offset),\n        (offset, duration) => swipe({ offset, duration, count: 1 }),\n        (offset) => swipe({ offset, count: 0 }),\n    ];\n    const pullDownParams = [\n        () => {\n            if (pullDownEnabled) {\n                setSwipeState(SwipeState.PULL_DOWN);\n            }\n        },\n        (offset) => setPullDownOffset(offset),\n        (offset) => pullDown(offset),\n        (offset) => pullDown(offset, true),\n    ];\n    usePointerSwipe(...swipeParams, pullDownEnabled, ...pullDownParams);\n    useWheelSwipe(swipeState, ...swipeParams);\n    const focusOnMount = useEventCallback(() => {\n        var _a;\n        if (controller.focus) {\n            (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n        }\n    });\n    React.useEffect(focusOnMount, [focusOnMount]);\n    const onViewCallback = useEventCallback(() => {\n        var _a;\n        (_a = on.view) === null || _a === void 0 ? void 0 : _a.call(on, { index: state.currentIndex });\n    });\n    React.useEffect(onViewCallback, [state.globalIndex, onViewCallback]);\n    React.useEffect(() => cleanup(subscribe(ACTION_PREV, (action) => swipe({ direction: ACTION_PREV, ...action })), subscribe(ACTION_NEXT, (action) => swipe({ direction: ACTION_NEXT, ...action })), subscribe(ACTION_SWIPE, (action) => dispatch(action))), [subscribe, swipe, dispatch]);\n    React.useEffect(() => subscribeSensors(EVENT_ON_KEY_UP, (event) => {\n        if (event.key === VK_ESCAPE) {\n            close();\n        }\n    }), [subscribeSensors, close]);\n    const context = React.useMemo(() => ({\n        prev,\n        next,\n        close,\n        focus,\n        slideRect: containerRect ? computeSlideRect(containerRect, carousel.padding) : { width: 0, height: 0 },\n        containerRect: containerRect || { width: 0, height: 0 },\n        subscribeSensors,\n        containerRef,\n        setCarouselRef,\n        toolbarWidth,\n        setToolbarWidth,\n    }), [\n        prev,\n        next,\n        close,\n        focus,\n        subscribeSensors,\n        containerRect,\n        containerRef,\n        setCarouselRef,\n        toolbarWidth,\n        setToolbarWidth,\n        carousel.padding,\n    ]);\n    React.useImperativeHandle(controller.ref, () => ({\n        prev,\n        next,\n        close,\n        focus,\n        getLightboxProps,\n        getLightboxState,\n    }), [prev, next, close, focus, getLightboxProps, getLightboxState]);\n    return (React.createElement(\"div\", { ref: handleContainerRef, className: clsx(cssClass(cssContainerPrefix()), cssClass(CLASS_FLEX_CENTER)), style: {\n            ...(swipeState === SwipeState.SWIPE\n                ? { [cssVar(\"swipe_offset\")]: `${Math.round(swipeOffset.current)}px` }\n                : null),\n            ...(swipeState === SwipeState.PULL_DOWN\n                ? {\n                    [cssVar(\"pull_down_offset\")]: `${Math.round(pullDownOffset.current)}px`,\n                    [cssVar(\"pull_down_opacity\")]: `${pullDownOpacity.current}`,\n                }\n                : null),\n            ...(controller.touchAction !== \"none\"\n                ? { [cssVar(\"controller_touch_action\")]: controller.touchAction }\n                : null),\n            ...styles.container,\n        }, ...(controller.aria ? { role: \"presentation\", \"aria-live\": \"polite\" } : null), tabIndex: -1, ...registerSensors }, containerRect && (React.createElement(ControllerContext.Provider, { value: context },\n        children, (_a = render.controls) === null || _a === void 0 ? void 0 :\n        _a.call(render)))));\n}\nconst ControllerModule = createModule(MODULE_CONTROLLER, Controller);\n\nfunction cssPrefix$2(value) {\n    return composePrefix(MODULE_CAROUSEL, value);\n}\nfunction cssSlidePrefix(value) {\n    return composePrefix(\"slide\", value);\n}\nfunction CarouselSlide({ slide, offset }) {\n    const containerRef = React.useRef(null);\n    const { currentIndex } = useLightboxState();\n    const { slideRect, close } = useController();\n    const { render, carousel: { imageFit, imageProps }, on: { click: onClick }, controller: { closeOnBackdropClick }, styles: { slide: style }, } = useLightboxProps();\n    const renderSlide = () => {\n        var _a, _b, _c, _d;\n        let rendered = (_a = render.slide) === null || _a === void 0 ? void 0 : _a.call(render, { slide, offset, rect: slideRect });\n        if (!rendered && isImageSlide(slide)) {\n            rendered = (React.createElement(ImageSlide, { slide: slide, offset: offset, render: render, rect: slideRect, imageFit: imageFit, imageProps: imageProps, onClick: offset === 0 ? () => onClick === null || onClick === void 0 ? void 0 : onClick({ index: currentIndex }) : undefined }));\n        }\n        return rendered ? (React.createElement(React.Fragment, null, (_b = render.slideHeader) === null || _b === void 0 ? void 0 :\n            _b.call(render, { slide }),\n            ((_c = render.slideContainer) !== null && _c !== void 0 ? _c : (({ children }) => children))({ slide, children: rendered }), (_d = render.slideFooter) === null || _d === void 0 ? void 0 :\n            _d.call(render, { slide }))) : null;\n    };\n    const handleBackdropClick = (event) => {\n        const container = containerRef.current;\n        const target = event.target instanceof HTMLElement ? event.target : undefined;\n        if (closeOnBackdropClick &&\n            target &&\n            container &&\n            (target === container ||\n                (Array.from(container.children).find((x) => x === target) &&\n                    target.classList.contains(cssClass(CLASS_FULLSIZE))))) {\n            close();\n        }\n    };\n    return (React.createElement(\"div\", { ref: containerRef, className: clsx(cssClass(cssSlidePrefix()), offset === 0 && cssClass(cssSlidePrefix(\"current\")), cssClass(CLASS_FLEX_CENTER)), onClick: handleBackdropClick, style: style }, renderSlide()));\n}\nfunction Placeholder() {\n    const style = useLightboxProps().styles.slide;\n    return React.createElement(\"div\", { className: cssClass(\"slide\"), style: style });\n}\nfunction Carousel({ carousel: { finite, preload, padding, spacing } }) {\n    const { slides, currentIndex, globalIndex } = useLightboxState();\n    const { setCarouselRef } = useController();\n    const spacingValue = parseLengthPercentage(spacing);\n    const paddingValue = parseLengthPercentage(padding);\n    const items = [];\n    if ((slides === null || slides === void 0 ? void 0 : slides.length) > 0) {\n        for (let i = currentIndex - preload; i < currentIndex; i += 1) {\n            const key = globalIndex + i - currentIndex;\n            items.push(!finite || i >= 0 ? (React.createElement(CarouselSlide, { key: key, slide: slides[(i + preload * slides.length) % slides.length], offset: i - currentIndex })) : (React.createElement(Placeholder, { key: key })));\n        }\n        items.push(React.createElement(CarouselSlide, { key: globalIndex, slide: slides[currentIndex], offset: 0 }));\n        for (let i = currentIndex + 1; i <= currentIndex + preload; i += 1) {\n            const key = globalIndex + i - currentIndex;\n            items.push(!finite || i <= slides.length - 1 ? (React.createElement(CarouselSlide, { key: key, slide: slides[i % slides.length], offset: i - currentIndex })) : (React.createElement(Placeholder, { key: key })));\n        }\n    }\n    return (React.createElement(\"div\", { ref: setCarouselRef, className: clsx(cssClass(cssPrefix$2()), items.length > 0 && cssClass(cssPrefix$2(\"with_slides\"))), style: {\n            [`${cssVar(cssPrefix$2(\"slides_count\"))}`]: items.length,\n            [`${cssVar(cssPrefix$2(\"spacing_px\"))}`]: spacingValue.pixel || 0,\n            [`${cssVar(cssPrefix$2(\"spacing_percent\"))}`]: spacingValue.percent || 0,\n            [`${cssVar(cssPrefix$2(\"padding_px\"))}`]: paddingValue.pixel || 0,\n            [`${cssVar(cssPrefix$2(\"padding_percent\"))}`]: paddingValue.percent || 0,\n        } }, items));\n}\nconst CarouselModule = createModule(MODULE_CAROUSEL, Carousel);\n\nfunction NavigationButton({ label, icon, renderIcon, action, onClick, disabled, style }) {\n    return (React.createElement(IconButton, { label: label, icon: icon, renderIcon: renderIcon, className: cssClass(`navigation_${action}`), disabled: disabled, onClick: onClick, style: style, ...useLoseFocus(useController().focus, disabled) }));\n}\nfunction Navigation({ carousel: { finite }, animation, render: { buttonPrev, buttonNext, iconPrev, iconNext }, styles, }) {\n    var _a;\n    const { slides, currentIndex } = useLightboxState();\n    const { prev, next, subscribeSensors } = useController();\n    const isRTL = useRTL();\n    const prevDisabled = slides.length === 0 || (finite && currentIndex === 0);\n    const nextDisabled = slides.length === 0 || (finite && currentIndex === slides.length - 1);\n    const throttle = ((_a = animation.navigation) !== null && _a !== void 0 ? _a : animation.swipe) / 2;\n    const prevThrottled = useThrottle(prev, throttle);\n    const nextThrottled = useThrottle(next, throttle);\n    const handleKeyDown = useEventCallback((event) => {\n        if (event.key === VK_ARROW_LEFT && !(isRTL ? nextDisabled : prevDisabled)) {\n            (isRTL ? nextThrottled : prevThrottled)();\n        }\n        if (event.key === VK_ARROW_RIGHT && !(isRTL ? prevDisabled : nextDisabled)) {\n            (isRTL ? prevThrottled : nextThrottled)();\n        }\n    });\n    React.useEffect(() => subscribeSensors(EVENT_ON_KEY_DOWN, handleKeyDown), [subscribeSensors, handleKeyDown]);\n    return (React.createElement(React.Fragment, null,\n        buttonPrev ? (buttonPrev()) : (React.createElement(NavigationButton, { label: \"Previous\", action: ACTION_PREV, icon: PreviousIcon, renderIcon: iconPrev, style: styles.navigationPrev, disabled: prevDisabled, onClick: prev })),\n        buttonNext ? (buttonNext()) : (React.createElement(NavigationButton, { label: \"Next\", action: ACTION_NEXT, icon: NextIcon, renderIcon: iconNext, style: styles.navigationNext, disabled: nextDisabled, onClick: next }))));\n}\nconst NavigationModule = createModule(MODULE_NAVIGATION, Navigation);\n\nconst noScroll = cssClass(CLASS_NO_SCROLL);\nconst noScrollPadding = cssClass(CLASS_NO_SCROLL_PADDING);\nfunction isHTMLElement(element) {\n    return \"style\" in element;\n}\nfunction padScrollbar(element, padding, rtl) {\n    const styles = window.getComputedStyle(element);\n    const property = rtl ? \"padding-left\" : \"padding-right\";\n    const computedValue = rtl ? styles.paddingLeft : styles.paddingRight;\n    const originalValue = element.style.getPropertyValue(property);\n    element.style.setProperty(property, `${(parseInt(computedValue, 10) || 0) + padding}px`);\n    return () => {\n        if (originalValue) {\n            element.style.setProperty(property, originalValue);\n        }\n        else {\n            element.style.removeProperty(property);\n        }\n    };\n}\nfunction NoScroll({ children }) {\n    const rtl = useRTL();\n    useLayoutEffect(() => {\n        const cleanup = [];\n        const { body, documentElement } = document;\n        const scrollbar = Math.round(window.innerWidth - documentElement.clientWidth);\n        if (scrollbar > 0) {\n            cleanup.push(padScrollbar(body, scrollbar, rtl));\n            const elements = body.getElementsByTagName(\"*\");\n            for (let i = 0; i < elements.length; i += 1) {\n                const element = elements[i];\n                if (isHTMLElement(element) &&\n                    window.getComputedStyle(element).getPropertyValue(\"position\") === \"fixed\" &&\n                    !element.classList.contains(noScrollPadding)) {\n                    cleanup.push(padScrollbar(element, scrollbar, rtl));\n                }\n            }\n        }\n        body.classList.add(noScroll);\n        return () => {\n            body.classList.remove(noScroll);\n            cleanup.forEach((clean) => clean());\n        };\n    }, [rtl]);\n    return React.createElement(React.Fragment, null, children);\n}\nconst NoScrollModule = createModule(MODULE_NO_SCROLL, NoScroll);\n\nfunction cssPrefix$1(value) {\n    return composePrefix(MODULE_PORTAL, value);\n}\nfunction setAttribute(element, attribute, value) {\n    const previousValue = element.getAttribute(attribute);\n    element.setAttribute(attribute, value);\n    return () => {\n        if (previousValue) {\n            element.setAttribute(attribute, previousValue);\n        }\n        else {\n            element.removeAttribute(attribute);\n        }\n    };\n}\nfunction Portal({ children, animation, styles, className, on, portal, close }) {\n    const [mounted, setMounted] = React.useState(false);\n    const [visible, setVisible] = React.useState(false);\n    const cleanup = React.useRef([]);\n    const { setTimeout } = useTimeouts();\n    const { subscribe } = useEvents();\n    const reduceMotion = useMotionPreference();\n    const animationDuration = !reduceMotion ? animation.fade : 0;\n    React.useEffect(() => {\n        setMounted(true);\n        return () => {\n            setMounted(false);\n            setVisible(false);\n        };\n    }, []);\n    const handleClose = useEventCallback(() => {\n        var _a;\n        setVisible(false);\n        (_a = on.exiting) === null || _a === void 0 ? void 0 : _a.call(on);\n        setTimeout(() => {\n            var _a;\n            (_a = on.exited) === null || _a === void 0 ? void 0 : _a.call(on);\n            close();\n        }, animationDuration);\n    });\n    React.useEffect(() => subscribe(ACTION_CLOSE, handleClose), [subscribe, handleClose]);\n    const handleEnter = useEventCallback((node) => {\n        var _a, _b, _c;\n        node.scrollTop;\n        setVisible(true);\n        (_a = on.entering) === null || _a === void 0 ? void 0 : _a.call(on);\n        const elements = (_c = (_b = node.parentNode) === null || _b === void 0 ? void 0 : _b.children) !== null && _c !== void 0 ? _c : [];\n        for (let i = 0; i < elements.length; i += 1) {\n            const element = elements[i];\n            if ([\"TEMPLATE\", \"SCRIPT\", \"STYLE\"].indexOf(element.tagName) === -1 && element !== node) {\n                cleanup.current.push(setAttribute(element, \"inert\", \"true\"));\n                cleanup.current.push(setAttribute(element, \"aria-hidden\", \"true\"));\n            }\n        }\n        setTimeout(() => {\n            var _a;\n            (_a = on.entered) === null || _a === void 0 ? void 0 : _a.call(on);\n        }, animationDuration);\n    });\n    const handleExit = useEventCallback(() => {\n        cleanup.current.forEach((clean) => clean());\n        cleanup.current = [];\n    });\n    const handleRef = React.useCallback((node) => {\n        if (node) {\n            handleEnter(node);\n        }\n        else {\n            handleExit();\n        }\n    }, [handleEnter, handleExit]);\n    return mounted\n        ? createPortal(React.createElement(\"div\", { ref: handleRef, className: clsx(className, cssClass(\"root\"), cssClass(cssPrefix$1()), cssClass(CLASS_NO_SCROLL_PADDING), visible && cssClass(cssPrefix$1(\"open\"))), role: \"presentation\", \"aria-live\": \"polite\", style: {\n                ...(animation.fade !== LightboxDefaultProps.animation.fade\n                    ? { [cssVar(\"fade_animation_duration\")]: `${animationDuration}ms` }\n                    : null),\n                ...(animation.easing.fade !== LightboxDefaultProps.animation.easing.fade\n                    ? { [cssVar(\"fade_animation_timing_function\")]: animation.easing.fade }\n                    : null),\n                ...styles.root,\n            } }, children), portal.root || document.body)\n        : null;\n}\nconst PortalModule = createModule(MODULE_PORTAL, Portal);\n\nfunction Root({ children }) {\n    return React.createElement(React.Fragment, null, children);\n}\nconst RootModule = createModule(MODULE_ROOT, Root);\n\nfunction cssPrefix(value) {\n    return composePrefix(MODULE_TOOLBAR, value);\n}\nfunction Toolbar({ toolbar: { buttons }, render: { buttonClose, iconClose }, styles }) {\n    const { close, setToolbarWidth } = useController();\n    const { setContainerRef, containerRect } = useContainerRect();\n    useLayoutEffect(() => {\n        setToolbarWidth(containerRect === null || containerRect === void 0 ? void 0 : containerRect.width);\n    }, [setToolbarWidth, containerRect === null || containerRect === void 0 ? void 0 : containerRect.width]);\n    const renderCloseButton = () => {\n        if (buttonClose)\n            return buttonClose();\n        return React.createElement(IconButton, { key: ACTION_CLOSE, label: \"Close\", icon: CloseIcon, renderIcon: iconClose, onClick: close });\n    };\n    return (React.createElement(\"div\", { ref: setContainerRef, style: styles.toolbar, className: cssClass(cssPrefix()), ...stopNavigationEventsPropagation() }, buttons === null || buttons === void 0 ? void 0 : buttons.map((button) => (button === ACTION_CLOSE ? renderCloseButton() : button))));\n}\nconst ToolbarModule = createModule(MODULE_TOOLBAR, Toolbar);\n\nfunction renderNode(node, props) {\n    var _a;\n    return React.createElement(node.module.component, { key: node.module.name, ...props }, (_a = node.children) === null || _a === void 0 ? void 0 : _a.map((child) => renderNode(child, props)));\n}\nfunction mergeAnimation(defaultAnimation, animation = {}) {\n    const { easing: defaultAnimationEasing, ...restDefaultAnimation } = defaultAnimation;\n    const { easing, ...restAnimation } = animation;\n    return {\n        easing: { ...defaultAnimationEasing, ...easing },\n        ...restDefaultAnimation,\n        ...restAnimation,\n    };\n}\nfunction Lightbox({ carousel, animation, render, toolbar, controller, on, plugins, slides, index, ...restProps }) {\n    const { animation: defaultAnimation, carousel: defaultCarousel, render: defaultRender, toolbar: defaultToolbar, controller: defaultController, on: defaultOn, slides: defaultSlides, index: defaultIndex, plugins: defaultPlugins, ...restDefaultProps } = LightboxDefaultProps;\n    const { config, augmentation } = withPlugins([\n        createNode(PortalModule, [\n            createNode(NoScrollModule, [\n                createNode(ControllerModule, [\n                    createNode(CarouselModule),\n                    createNode(ToolbarModule),\n                    createNode(NavigationModule),\n                ]),\n            ]),\n        ]),\n    ], plugins || defaultPlugins);\n    const props = augmentation({\n        animation: mergeAnimation(defaultAnimation, animation),\n        carousel: { ...defaultCarousel, ...carousel },\n        render: { ...defaultRender, ...render },\n        toolbar: { ...defaultToolbar, ...toolbar },\n        controller: { ...defaultController, ...controller },\n        on: { ...defaultOn, ...on },\n        ...restDefaultProps,\n        ...restProps,\n    });\n    if (!props.open)\n        return null;\n    return (React.createElement(LightboxPropsProvider, { ...props },\n        React.createElement(LightboxStateProvider, { slides: slides || defaultSlides, index: index || defaultIndex },\n            React.createElement(TimeoutsProvider, null,\n                React.createElement(EventsProvider, null, renderNode(createNode(RootModule, config), props))))));\n}\n\nexport { ACTION_CLOSE, ACTION_NEXT, ACTION_PREV, ACTION_SWIPE, CLASS_FLEX_CENTER, CLASS_FULLSIZE, CLASS_NO_SCROLL, CLASS_NO_SCROLL_PADDING, Carousel, CarouselModule, CloseIcon, Controller, ControllerContext, ControllerModule, ELEMENT_BUTTON, ELEMENT_ICON, EVENT_ON_KEY_DOWN, EVENT_ON_KEY_UP, EVENT_ON_POINTER_CANCEL, EVENT_ON_POINTER_DOWN, EVENT_ON_POINTER_LEAVE, EVENT_ON_POINTER_MOVE, EVENT_ON_POINTER_UP, EVENT_ON_WHEEL, ErrorIcon, EventsContext, EventsProvider, IMAGE_FIT_CONTAIN, IMAGE_FIT_COVER, IconButton, ImageSlide, Lightbox, LightboxDefaultProps, LightboxDispatchContext, LightboxPropsContext, LightboxPropsProvider, LightboxStateContext, LightboxStateProvider, LoadingIcon, MODULE_CAROUSEL, MODULE_CONTROLLER, MODULE_NAVIGATION, MODULE_NO_SCROLL, MODULE_PORTAL, MODULE_ROOT, MODULE_TOOLBAR, Navigation, NavigationButton, NavigationModule, NextIcon, NoScroll, NoScrollModule, Portal, PortalModule, PreviousIcon, Root, RootModule, SLIDE_STATUS_COMPLETE, SLIDE_STATUS_ERROR, SLIDE_STATUS_LOADING, SLIDE_STATUS_PLACEHOLDER, SwipeState, TimeoutsContext, TimeoutsProvider, Toolbar, ToolbarModule, UNKNOWN_ACTION_TYPE, VK_ARROW_LEFT, VK_ARROW_RIGHT, VK_ESCAPE, activeSlideStatus, addToolbarButton, cleanup, clsx, composePrefix, computeSlideRect, createIcon, createIconDisabled, createModule, createNode, cssClass, cssVar, Lightbox as default, devicePixelRatio, getSlide, getSlideIfPresent, getSlideIndex, hasSlides, hasWindow, isImageFitCover, isImageSlide, label, makeComposePrefix, makeUseContext, parseLengthPercentage, round, setRef, stopNavigationEventsPropagation, useAnimation, useContainerRect, useController, useDelay, useEventCallback, useEvents, useForkRef, useLayoutEffect, useLightboxDispatch, useLightboxProps, useLightboxState, useLoseFocus, useMotionPreference, usePointerEvents, usePointerSwipe, usePreventSwipeNavigation, useRTL, useSensors, useThrottle, useTimeouts, useWheelSwipe, withPlugins };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}